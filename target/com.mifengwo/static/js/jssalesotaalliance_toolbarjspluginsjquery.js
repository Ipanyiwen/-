$(window).scroll(function(){var b=$("#_j_mfwtoolbar"),c=$(".consult"),g=$("#footer"),d=$(window).scrollTop(),f=$(window).height(),e=b.height(),a=g.height();if(d+f>g.offset().top){c.css({position:"absolute",bottom:e+a+70,top:"auto"})}else{c.css({position:"",bottom:"",top:""})}});(function(a){var b={i18n:{en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],saveSelected:"Save Selected"},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"],saveSelected:"确定"},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeek:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeek:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"]}},value:"",lang:"en",rtl:false,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:false,step:60,monthChangeSpinner:true,closeOnDateSelect:false,closeOnTimeSelect:true,closeOnWithoutClick:true,closeOnInputClick:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,disabledMinTime:false,disabledMaxTime:false,allowTimes:[],opened:false,initTime:true,inline:false,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,prevButton:true,nextButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:true,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:false,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:true,showApplyButton:false};if(!window.getComputedStyle){window.getComputedStyle=function(c,d){this.el=c;this.getPropertyValue=function(f){var e=/(\-([a-z]){1})/g;if(f==="float"){f="styleFloat"}if(e.test(f)){f=f.replace(e,function(h,g,i){return i.toUpperCase()})}return c.currentStyle[f]||null};return this}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,f){var d,c;for(d=(f||0),c=this.length;d<c;d+=1){if(this[d]===e){return d}}return -1}}Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};a.fn.xdsoftScroller=function(c){return this.each(function(){var m=a(this),n=function(v){var u={x:0,y:0},w;if(v.type==="touchstart"||v.type==="touchmove"||v.type==="touchend"||v.type==="touchcancel"){w=v.originalEvent.touches[0]||v.originalEvent.changedTouches[0];u.x=w.clientX;u.y=w.clientY}else{if(v.type==="mousedown"||v.type==="mouseup"||v.type==="mousemove"||v.type==="mouseover"||v.type==="mouseout"||v.type==="mouseenter"||v.type==="mouseleave"){u.x=v.clientX;u.y=v.clientY}}return u},g=0,r,k,s,t,j,q=100,e=false,i=0,l=0,p=0,f=false,d=0,h=function(){};if(c==="hide"){m.find(".xdsoft_scrollbar").hide();return}if(!a(this).hasClass("xdsoft_scroller_box")){r=m.children().eq(0);k=m[0].clientHeight;s=r[0].offsetHeight;t=a('<div class="xdsoft_scrollbar"></div>');j=a('<div class="xdsoft_scroller"></div>');t.append(j);m.addClass("xdsoft_scroller_box").append(t);h=function h(u){var v=n(u).y-i+d;if(v<0){v=0}if(v+j[0].offsetHeight>p){v=p-j[0].offsetHeight}m.trigger("scroll_element.xdsoft_scroller",[q?v/q:0])};j.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(v){if(!k){m.trigger("resize_scroll.xdsoft_scroller",[c])}i=n(v).y;d=parseInt(j.css("margin-top"),10);p=t[0].offsetHeight;if(v.type==="mousedown"){if(document){a(document.body).addClass("xdsoft_noselect")}a([document.body,window]).on("mouseup.xdsoft_scroller",function u(){a([document.body,window]).off("mouseup.xdsoft_scroller",u).off("mousemove.xdsoft_scroller",h).removeClass("xdsoft_noselect")});a(document.body).on("mousemove.xdsoft_scroller",h)}else{f=true;v.stopPropagation();v.preventDefault()}}).on("touchmove",function(u){if(f){u.preventDefault();h(u)}}).on("touchend touchcancel",function(u){f=false;d=0});m.on("scroll_element.xdsoft_scroller",function(v,u){if(!k){m.trigger("resize_scroll.xdsoft_scroller",[u,true])}u=u>1?1:(u<0||isNaN(u))?0:u;j.css("margin-top",q*u);setTimeout(function(){r.css("marginTop",-parseInt((r[0].offsetHeight-k)*u,10))},10)}).on("resize_scroll.xdsoft_scroller",function(y,v,u){var x,w;k=m[0].clientHeight;s=r[0].offsetHeight;x=k/s;w=x*t[0].offsetHeight;if(x>1){j.hide()}else{j.show();j.css("height",parseInt(w>10?w:10,10));q=t[0].offsetHeight-j[0].offsetHeight;if(u!==true){m.trigger("scroll_element.xdsoft_scroller",[v||Math.abs(parseInt(r.css("marginTop"),10))/(s-k)])}}});m.on("mousewheel",function(u){var v=Math.abs(parseInt(r.css("marginTop"),10));v=v-(u.deltaY*20);if(v<0){v=0}m.trigger("scroll_element.xdsoft_scroller",[v/(s-k)]);u.stopPropagation();return false});m.on("touchstart",function(u){e=n(u);l=Math.abs(parseInt(r.css("marginTop"),10))});m.on("touchmove",function(u){if(e){u.preventDefault();var v=n(u);m.trigger("scroll_element.xdsoft_scroller",[(l-(v.y-e.y))/(s-k)])}});m.on("touchend touchcancel",function(u){e=false;l=0})}m.trigger("resize_scroll.xdsoft_scroller",[c])})};a.fn.datetimepicker=function(e){var u=48,p=57,i=96,c=105,l=17,r=46,m=13,D=27,z=8,v=37,s=38,B=39,C=40,h=9,w=116,x=65,d=67,A=86,q=90,k=89,y=false,g=(a.isPlainObject(e)||!e)?a.extend(true,{},b,e):a.extend(true,{},b),n=0,f,t,j=function(F){F.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function E(G){if(F.is(":disabled")||F.data("xdsoft_datetimepicker")){return}clearTimeout(n);n=setTimeout(function(){if(!F.data("xdsoft_datetimepicker")){f(F)}F.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",E).trigger("open.xdsoft")},100)})};f=function(N){var P=a('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),T=a('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),L=a('<div class="xdsoft_datepicker active"></div>'),U=a('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),R=a('<div class="xdsoft_calendar"></div>'),W=a('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),H=W.find(".xdsoft_time_box").eq(0),G=a('<div class="xdsoft_time_variant"></div>'),Q=a('<button type="button" class="xdsoft_save_selected blue-gradient-button">'+g.i18n[g.lang].saveSelected+"</button>"),F=a('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),V=a('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),S=false,X,I,E,Z,J,M=0,Y=0,O;if(g.id){P.attr("id",g.id)}if(g.style){P.attr("style",g.style)}if(g.weeks){P.addClass("xdsoft_showweeks")}if(g.rtl){P.addClass("xdsoft_rtl")}P.addClass("xdsoft_"+g.theme);P.addClass(g.className);U.find(".xdsoft_month span").after(F);U.find(".xdsoft_year span").after(V);U.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(ad){var aa=a(this).find(".xdsoft_select").eq(0),ag=0,ae=0,af=aa.is(":visible"),ab,ac;U.find(".xdsoft_select").hide();if(O.currentTime){ag=O.currentTime[a(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()}aa[af?"hide":"show"]();for(ab=aa.find("div.xdsoft_option"),ac=0;ac<ab.length;ac+=1){if(ab.eq(ac).data("value")===ag){break}else{ae+=ab[0].offsetHeight}}aa.xdsoftScroller(ae/(aa.children()[0].offsetHeight-(aa[0].clientHeight)));ad.stopPropagation();return false});U.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(aa){aa.stopPropagation();aa.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(ab){if(O.currentTime===undefined||O.currentTime===null){O.currentTime=O.now()}var aa=O.currentTime.getFullYear();if(O&&O.currentTime){O.currentTime[a(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](a(this).data("value"))}a(this).parent().parent().hide();P.trigger("xchange.xdsoft");if(g.onChangeMonth&&a.isFunction(g.onChangeMonth)){g.onChangeMonth.call(P,O.currentTime,P.data("input"))}if(aa!==O.currentTime.getFullYear()&&a.isFunction(g.onChangeYear)){g.onChangeYear.call(P,O.currentTime,P.data("input"))}});P.setOptions=function(aa){var ac={},ad=function(ag){try{if(document.selection&&document.selection.createRange){var af=document.selection.createRange();return af.getBookmark().charCodeAt(2)-2}if(ag.setSelectionRange){return ag.selectionStart}}catch(ah){return 0}},ab=function(ag,ah){ag=(typeof ag==="string"||ag instanceof String)?document.getElementById(ag):ag;if(!ag){return false}if(ag.createTextRange){var af=ag.createTextRange();af.collapse(true);af.moveEnd("character",ah);af.moveStart("character",ah);af.select();return true}if(ag.setSelectionRange){ag.setSelectionRange(ah,ah);return true}return false},ae=function(af,ah){var ag=af.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return(new RegExp(ag)).test(ah)};g=a.extend(true,{},g,aa);if(aa.allowTimes&&a.isArray(aa.allowTimes)&&aa.allowTimes.length){g.allowTimes=a.extend(true,[],aa.allowTimes)}if(aa.weekends&&a.isArray(aa.weekends)&&aa.weekends.length){g.weekends=a.extend(true,[],aa.weekends)}if(aa.highlightedDates&&a.isArray(aa.highlightedDates)&&aa.highlightedDates.length){a.each(aa.highlightedDates,function(ah,aj){var ag=a.map(aj.split(","),a.trim),af,ak=new HighlightedDate(Date.parseDate(ag[0],g.formatDate),ag[1],ag[2]),ai=ak.date.dateFormat(g.formatDate);if(ac[ai]!==undefined){af=ac[ai].desc;if(af&&af.length&&ak.desc&&ak.desc.length){ac[ai].desc=af+"\n"+ak.desc}}else{ac[ai]=ak}});g.highlightedDates=a.extend(true,[],ac)}if(aa.highlightedPeriods&&a.isArray(aa.highlightedPeriods)&&aa.highlightedPeriods.length){ac=a.extend(true,[],g.highlightedDates);a.each(aa.highlightedPeriods,function(am,an){var ai,ao,ak,al,ag,aj,af;if(a.isArray(an)){ai=an[0];ao=an[1];ak=an[2];af=an[3]}else{var ah=a.map(an.split(","),a.trim);ai=Date.parseDate(ah[0],g.formatDate);ao=Date.parseDate(ah[1],g.formatDate);ak=ah[2];af=ah[3]}while(ai<=ao){al=new HighlightedDate(ai,ak,af);ag=ai.dateFormat(g.formatDate);ai.setDate(ai.getDate()+1);if(ac[ag]!==undefined){aj=ac[ag].desc;if(aj&&aj.length&&al.desc&&al.desc.length){ac[ag].desc=aj+"\n"+al.desc}}else{ac[ag]=al}}});g.highlightedDates=a.extend(true,[],ac)}if(aa.disabledDates&&a.isArray(aa.disabledDates)&&aa.disabledDates.length){g.disabledDates=a.extend(true,[],aa.disabledDates)}if(aa.disabledWeekDays&&a.isArray(aa.disabledWeekDays)&&aa.disabledWeekDays.length){g.disabledWeekDays=a.extend(true,[],aa.disabledWeekDays)}if((g.open||g.opened)&&(!g.inline)){N.trigger("open.xdsoft")}if(g.inline){S=true;P.addClass("xdsoft_inline");N.after(P).hide()}if(g.inverseButton){g.next="xdsoft_prev";g.prev="xdsoft_next"}if(g.datepicker){L.addClass("active")}else{L.removeClass("active")}if(g.timepicker){W.addClass("active")}else{W.removeClass("active")}if(g.value){O.setCurrentTime(g.value);if(N&&N.val){N.val(O.str)}}if(isNaN(g.dayOfWeekStart)){g.dayOfWeekStart=0}else{g.dayOfWeekStart=parseInt(g.dayOfWeekStart,10)%7}if(!g.timepickerScrollbar){H.xdsoftScroller("hide")}if(g.minDate&&/^[\+\-](.*)$/.test(g.minDate)){g.minDate=O.strToDateTime(g.minDate).dateFormat(g.formatDate)}if(g.maxDate&&/^[\+\-](.*)$/.test(g.maxDate)){g.maxDate=O.strToDateTime(g.maxDate).dateFormat(g.formatDate)}Q.toggle(g.showApplyButton);U.find(".xdsoft_today_button").css("visibility",!g.todayButton?"hidden":"visible");U.find("."+g.prev).css("visibility",!g.prevButton?"hidden":"visible");U.find("."+g.next).css("visibility",!g.nextButton?"hidden":"visible");if(g.mask){N.off("keydown.xdsoft");if(g.mask===true){g.mask=g.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")}if(a.type(g.mask)==="string"){if(!ae(g.mask,N.val())){N.val(g.mask.replace(/[0-9]/g,"_"))}N.on("keydown.xdsoft",function(ag){var ah=this.value,af=ag.which,aj,ai;if(((af>=u&&af<=p)||(af>=i&&af<=c))||(af===z||af===r)){aj=ad(this);ai=(af!==z&&af!==r)?String.fromCharCode((i<=af&&af<=c)?af-u:af):"_";if((af===z||af===r)&&aj){aj-=1;ai="_"}while(/[^0-9_]/.test(g.mask.substr(aj,1))&&aj<g.mask.length&&aj>0){aj+=(af===z||af===r)?-1:1}ah=ah.substr(0,aj)+ai+ah.substr(aj+1);if(a.trim(ah)===""){ah=g.mask.replace(/[0-9]/g,"_")}else{if(aj===g.mask.length){ag.preventDefault();return false}}aj+=(af===z||af===r)?0:1;while(/[^0-9_]/.test(g.mask.substr(aj,1))&&aj<g.mask.length&&aj>0){aj+=(af===z||af===r)?-1:1}if(ae(g.mask,ah)){this.value=ah;ab(this,aj)}else{if(a.trim(ah)===""){this.value=g.mask.replace(/[0-9]/g,"_")}else{N.trigger("error_input.xdsoft")}}}else{if(([x,d,A,q,k].indexOf(af)!==-1&&y)||[D,s,C,v,B,w,l,h,m].indexOf(af)!==-1){return true}}ag.preventDefault();return false})}}if(g.validateOnBlur){N.off("blur.xdsoft").on("blur.xdsoft",function(){if(g.allowBlank&&!a.trim(a(this).val()).length){a(this).val(null);P.data("xdsoft_datetime").empty()}else{if(!Date.parseDate(a(this).val(),g.format)){var ag=+([a(this).val()[0],a(this).val()[1]].join("")),af=+([a(this).val()[2],a(this).val()[3]].join(""));if(!g.datepicker&&g.timepicker&&ag>=0&&ag<24&&af>=0&&af<60){a(this).val([ag,af].map(function(ah){return ah>9?ah:"0"+ah}).join(":"))}else{a(this).val((O.now()).dateFormat(g.format))}P.data("xdsoft_datetime").setCurrentTime(a(this).val())}else{P.data("xdsoft_datetime").setCurrentTime(a(this).val())}}P.trigger("changedatetime.xdsoft")})}g.dayOfWeekStartPrev=(g.dayOfWeekStart===0)?6:g.dayOfWeekStart-1;P.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")};P.data("options",g).on("mousedown.xdsoft",function(aa){aa.stopPropagation();aa.preventDefault();V.hide();F.hide();return false});H.append(G);H.xdsoftScroller();P.on("afterOpen.xdsoft",function(){H.xdsoftScroller()});P.append(L).append(W);if(g.withoutCopyright!==true){P.append(T)}L.append(U).append(R).append(Q);a(g.parentID).append(P);X=function(){var aa=this;aa.now=function(ad){var ae=new Date(),ab,ac;if(!ad&&g.defaultDate){ab=aa.strToDateTime(g.defaultDate);ae.setFullYear(ab.getFullYear());ae.setMonth(ab.getMonth());ae.setDate(ab.getDate())}if(g.yearOffset){ae.setFullYear(ae.getFullYear()+g.yearOffset)}if(!ad&&g.defaultTime){ac=aa.strtotime(g.defaultTime);ae.setHours(ac.getHours());ae.setMinutes(ac.getMinutes())}return ae};aa.isValidDate=function(ab){if(Object.prototype.toString.call(ab)!=="[object Date]"){return false}return !isNaN(ab.getTime())};aa.setCurrentTime=function(ab){aa.currentTime=(typeof ab==="string")?aa.strToDateTime(ab):aa.isValidDate(ab)?ab:aa.now();P.trigger("xchange.xdsoft")};aa.empty=function(){aa.currentTime=null};aa.getCurrentTime=function(ab){return aa.currentTime};aa.nextMonth=function(){if(aa.currentTime===undefined||aa.currentTime===null){aa.currentTime=aa.now()}var ac=aa.currentTime.getMonth()+1,ab;if(ac===12){aa.currentTime.setFullYear(aa.currentTime.getFullYear()+1);ac=0}ab=aa.currentTime.getFullYear();aa.currentTime.setDate(Math.min(new Date(aa.currentTime.getFullYear(),ac+1,0).getDate(),aa.currentTime.getDate()));aa.currentTime.setMonth(ac);if(g.onChangeMonth&&a.isFunction(g.onChangeMonth)){g.onChangeMonth.call(P,O.currentTime,P.data("input"))}if(ab!==aa.currentTime.getFullYear()&&a.isFunction(g.onChangeYear)){g.onChangeYear.call(P,O.currentTime,P.data("input"))}P.trigger("xchange.xdsoft");return ac};aa.prevMonth=function(){if(aa.currentTime===undefined||aa.currentTime===null){aa.currentTime=aa.now()}var ab=aa.currentTime.getMonth()-1;if(ab===-1){aa.currentTime.setFullYear(aa.currentTime.getFullYear()-1);ab=11}aa.currentTime.setDate(Math.min(new Date(aa.currentTime.getFullYear(),ab+1,0).getDate(),aa.currentTime.getDate()));aa.currentTime.setMonth(ab);if(g.onChangeMonth&&a.isFunction(g.onChangeMonth)){g.onChangeMonth.call(P,O.currentTime,P.data("input"))}P.trigger("xchange.xdsoft");return ab};aa.getWeekOfYear=function(ac){var ab=new Date(ac.getFullYear(),0,1);return Math.ceil((((ac-ab)/86400000)+ab.getDay()+1)/7)};aa.strToDateTime=function(ae){var ac=[],ab,ad;if(ae&&ae instanceof Date&&aa.isValidDate(ae)){return ae}ac=/^(\+|\-)(.*)$/.exec(ae);if(ac){ac[2]=Date.parseDate(ac[2],g.formatDate)}if(ac&&ac[2]){ab=ac[2].getTime()-(ac[2].getTimezoneOffset())*60000;ad=new Date((aa.now(true)).getTime()+parseInt(ac[1]+"1",10)*ab)}else{ad=ae?Date.parseDate(ae,g.format):aa.now()}if(!aa.isValidDate(ad)){ad=aa.now()}return ad};aa.strToDate=function(ac){if(ac&&ac instanceof Date&&aa.isValidDate(ac)){return ac}var ab=ac?Date.parseDate(ac,g.formatDate):aa.now(true);if(!aa.isValidDate(ab)){ab=aa.now(true)}return ab};aa.strtotime=function(ab){if(ab&&ab instanceof Date&&aa.isValidDate(ab)){return ab}var ac=ab?Date.parseDate(ab,g.formatTime):aa.now(true);if(!aa.isValidDate(ac)){ac=aa.now(true)}return ac};aa.str=function(){return aa.currentTime.dateFormat(g.format)};aa.currentTime=this.now()};O=new X();Q.on("click",function(aa){aa.preventDefault();P.data("changed",true);O.setCurrentTime(K());N.val(O.str());P.trigger("close.xdsoft")});U.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){P.data("changed",true);O.setCurrentTime(0);P.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var aa=O.getCurrentTime(),ab,ac;aa=new Date(aa.getFullYear(),aa.getMonth(),aa.getDate());ab=O.strToDate(g.minDate);ab=new Date(ab.getFullYear(),ab.getMonth(),ab.getDate());if(aa<ab){return}ac=O.strToDate(g.maxDate);ac=new Date(ac.getFullYear(),ac.getMonth(),ac.getDate());if(aa>ac){return}N.val(O.str());N.trigger("change");P.trigger("close.xdsoft")});U.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var ab=a(this),ae=0,aa=false;(function ad(af){if(ab.hasClass(g.next)){O.nextMonth()}else{if(ab.hasClass(g.prev)){O.prevMonth()}}if(g.monthChangeSpinner){if(!aa){ae=setTimeout(ad,af||100)}}}(500));a([document.body,window]).on("mouseup.xdsoft",function ac(){clearTimeout(ae);aa=true;a([document.body,window]).off("mouseup.xdsoft",ac)})});W.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var ad=a(this),af=0,aa=false,ae=110;(function ac(ah){var aj=H[0].clientHeight,ag=G[0].offsetHeight,ai=Math.abs(parseInt(G.css("marginTop"),10));if(ad.hasClass(g.next)&&(ag-aj)-g.timeHeightInTimePicker>=ai){G.css("marginTop","-"+(ai+g.timeHeightInTimePicker)+"px")}else{if(ad.hasClass(g.prev)&&ai-g.timeHeightInTimePicker>=0){G.css("marginTop","-"+(ai-g.timeHeightInTimePicker)+"px")}}H.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(G.css("marginTop"),10)/(ag-aj))]);ae=(ae>10)?10:ae-10;if(!aa){af=setTimeout(ac,ah||ae)}}(500));a([document.body,window]).on("mouseup.xdsoft",function ab(){clearTimeout(af);aa=true;a([document.body,window]).off("mouseup.xdsoft",ab)})});I=0;P.on("xchange.xdsoft",function(aa){clearTimeout(I);I=setTimeout(function(){if(O.currentTime===undefined||O.currentTime===null){O.currentTime=O.now()}var ar="",ae=new Date(O.currentTime.getFullYear(),O.currentTime.getMonth(),1,12,0,0),ap=0,an,at=O.now(),ak=false,ag=false,af,ao,au,ai,al,aj,av=[],ac,ad=true,ah="",aq="",ab,am;while(ae.getDay()!==g.dayOfWeekStart){ae.setDate(ae.getDate()-1)}ar+="<table><thead><tr>";if(g.weeks){ar+="<th></th>"}for(an=0;an<7;an+=1){ar+="<th>"+g.i18n[g.lang].dayOfWeek[(an+g.dayOfWeekStart)%7]+"</th>"}ar+="</tr></thead>";ar+="<tbody>";if(g.maxDate!==false){ak=O.strToDate(g.maxDate);ak=new Date(ak.getFullYear(),ak.getMonth(),ak.getDate(),23,59,59,999)}if(g.minDate!==false){ag=O.strToDate(g.minDate);ag=new Date(ag.getFullYear(),ag.getMonth(),ag.getDate())}while(ap<O.currentTime.countDaysInMonth()||ae.getDay()!==g.dayOfWeekStart||O.currentTime.getMonth()===ae.getMonth()){av=[];ap+=1;ao=ae.getDay();au=ae.getDate();ai=ae.getFullYear();al=ae.getMonth();aj=O.getWeekOfYear(ae);am="";av.push("xdsoft_date");if(g.beforeShowDay&&a.isFunction(g.beforeShowDay.call)){ac=g.beforeShowDay.call(P,ae)}else{ac=null}if((ak!==false&&ae>ak)||(ag!==false&&ae<ag)||(ac&&ac[0]===false)){av.push("xdsoft_disabled")}else{if(g.disabledDates.indexOf(ae.dateFormat(g.formatDate))!==-1){av.push("xdsoft_disabled")}else{if(g.disabledWeekDays.indexOf(ao)!==-1){av.push("xdsoft_disabled")}}}if(ac&&ac[1]!==""){av.push(ac[1])}if(O.currentTime.getMonth()!==al){av.push("xdsoft_other_month")}if((g.defaultSelect||P.data("changed"))&&O.currentTime.dateFormat(g.formatDate)===ae.dateFormat(g.formatDate)){av.push("xdsoft_current")}if(at.dateFormat(g.formatDate)===ae.dateFormat(g.formatDate)){av.push("xdsoft_today")}if(ae.getDay()===0||ae.getDay()===6||g.weekends.indexOf(ae.dateFormat(g.formatDate))!==-1){av.push("xdsoft_weekend")}if(g.highlightedDates[ae.dateFormat(g.formatDate)]!==undefined){af=g.highlightedDates[ae.dateFormat(g.formatDate)];av.push(af.style===undefined?"xdsoft_highlighted_default":af.style);am=af.desc===undefined?"":af.desc}if(g.beforeShowDay&&a.isFunction(g.beforeShowDay)){av.push(g.beforeShowDay(ae))}if(ad){ar+="<tr>";ad=false;if(g.weeks){ar+="<th>"+aj+"</th>"}}ar+='<td data-date="'+au+'" data-month="'+al+'" data-year="'+ai+'" class="xdsoft_date xdsoft_day_of_week'+ae.getDay()+" "+av.join(" ")+'" title="'+am+'"><div>'+au+"</div></td>";if(ae.getDay()===g.dayOfWeekStartPrev){ar+="</tr>";ad=true}ae.setDate(au+1)}ar+="</tbody></table>";R.html(ar);U.find(".xdsoft_label span").eq(1).text(g.i18n[g.lang].months[O.currentTime.getMonth()]);U.find(".xdsoft_label span").eq(0).text(O.currentTime.getFullYear()+"年");ah="";aq="";al="";ab=function ab(az,aw){var ay=O.now(),ax,aA;ay.setHours(az);az=parseInt(ay.getHours(),10);ay.setMinutes(aw);aw=parseInt(ay.getMinutes(),10);ax=new Date(O.currentTime);ax.setHours(az);ax.setMinutes(aw);av=[];if((g.minDateTime!==false&&g.minDateTime>ax)||(g.maxTime!==false&&O.strtotime(g.maxTime).getTime()<ay.getTime())||(g.minTime!==false&&O.strtotime(g.minTime).getTime()>ay.getTime())){av.push("xdsoft_disabled")}if((g.minDateTime!==false&&g.minDateTime>ax)||((g.disabledMinTime!==false&&ay.getTime()>O.strtotime(g.disabledMinTime).getTime())&&(g.disabledMaxTime!==false&&ay.getTime()<O.strtotime(g.disabledMaxTime).getTime()))){av.push("xdsoft_disabled")}aA=new Date(O.currentTime);aA.setHours(parseInt(O.currentTime.getHours(),10));aA.setMinutes(Math[g.roundTime](O.currentTime.getMinutes()/g.step)*g.step);if((g.initTime||g.defaultSelect||P.data("changed"))&&aA.getHours()===parseInt(az,10)&&(g.step>59||aA.getMinutes()===parseInt(aw,10))){if(g.defaultSelect||P.data("changed")){av.push("xdsoft_current")}else{if(g.initTime){av.push("xdsoft_init_time")}}}if(parseInt(at.getHours(),10)===parseInt(az,10)&&parseInt(at.getMinutes(),10)===parseInt(aw,10)){av.push("xdsoft_today")}ah+='<div class="xdsoft_time '+av.join(" ")+'" data-hour="'+az+'" data-minute="'+aw+'">'+ay.dateFormat(g.formatTime)+"</div>"};if(!g.allowTimes||!a.isArray(g.allowTimes)||!g.allowTimes.length){for(ap=0,an=0;ap<(g.hours12?12:24);ap+=1){for(an=0;an<60;an+=g.step){aq=(ap<10?"0":"")+ap;al=(an<10?"0":"")+an;ab(aq,al)}}}else{for(ap=0;ap<g.allowTimes.length;ap+=1){aq=O.strtotime(g.allowTimes[ap]).getHours();al=O.strtotime(g.allowTimes[ap]).getMinutes();ab(aq,al)}}G.html(ah);e="";ap=0;for(ap=parseInt(g.yearStart,10)+g.yearOffset;ap<=parseInt(g.yearEnd,10)+g.yearOffset;ap+=1){e+='<div class="xdsoft_option '+(O.currentTime.getFullYear()===ap?"xdsoft_current":"")+'" data-value="'+ap+'">'+ap+"</div>"}V.children().eq(0).html(e);for(ap=parseInt(g.monthStart,10),e="";ap<=parseInt(g.monthEnd,10);ap+=1){e+='<div class="xdsoft_option '+(O.currentTime.getMonth()===ap?"xdsoft_current":"")+'" data-value="'+ap+'">'+g.i18n[g.lang].months[ap]+"</div>"}F.children().eq(0).html(e);a(P).trigger("generate.xdsoft")},10);aa.stopPropagation()}).on("afterOpen.xdsoft",function(){if(g.timepicker){var ab,ad,aa,ac;if(G.find(".xdsoft_current").length){ab=".xdsoft_current"}else{if(G.find(".xdsoft_init_time").length){ab=".xdsoft_init_time"}}if(ab){ad=H[0].clientHeight;aa=G[0].offsetHeight;ac=G.find(ab).index()*g.timeHeightInTimePicker+1;if((aa-ad)<ac){ac=aa-ad}H.trigger("scroll_element.xdsoft_scroller",[parseInt(ac,10)/(aa-ad)])}else{H.trigger("scroll_element.xdsoft_scroller",[0])}}});E=0;R.on("click.xdsoft","td",function(aa){aa.stopPropagation();E+=1;var ac=a(this),ab=O.currentTime;if(ab===undefined||ab===null){O.currentTime=O.now();ab=O.currentTime}if(ac.hasClass("xdsoft_disabled")){return false}ab.setDate(1);ab.setFullYear(ac.data("year"));ab.setMonth(ac.data("month"));ab.setDate(ac.data("date"));P.trigger("select.xdsoft",[ab]);N.val(O.str());if((E>1||(g.closeOnDateSelect===true||(g.closeOnDateSelect===false&&!g.timepicker)))&&!g.inline){P.trigger("close.xdsoft")}if(g.onSelectDate&&a.isFunction(g.onSelectDate)){g.onSelectDate.call(P,O.currentTime,P.data("input"),aa)}P.data("changed",true);P.trigger("xchange.xdsoft");P.trigger("changedatetime.xdsoft");setTimeout(function(){E=0},200)});G.on("click.xdsoft","div",function(aa){aa.stopPropagation();var ac=a(this),ab=O.currentTime;if(ab===undefined||ab===null){O.currentTime=O.now();ab=O.currentTime}if(ac.hasClass("xdsoft_disabled")){return false}ab.setHours(ac.data("hour"));ab.setMinutes(ac.data("minute"));P.trigger("select.xdsoft",[ab]);P.data("input").val(O.str());if(g.inline!==true&&g.closeOnTimeSelect===true){P.trigger("close.xdsoft")}if(g.onSelectTime&&a.isFunction(g.onSelectTime)){g.onSelectTime.call(P,O.currentTime,P.data("input"),aa)}P.data("changed",true);P.trigger("xchange.xdsoft");P.trigger("changedatetime.xdsoft")});L.on("mousewheel.xdsoft",function(aa){if(!g.scrollMonth){return true}if(aa.deltaY<0){O.nextMonth()}else{O.prevMonth()}return false});N.on("mousewheel.xdsoft",function(aa){if(!g.scrollInput){return true}if(!g.datepicker&&g.timepicker){Z=G.find(".xdsoft_current").length?G.find(".xdsoft_current").eq(0).index():0;if(Z+aa.deltaY>=0&&Z+aa.deltaY<G.children().length){Z+=aa.deltaY}if(G.children().eq(Z).length){G.children().eq(Z).trigger("mousedown")}return false}if(g.datepicker&&!g.timepicker){L.trigger(aa,[aa.deltaY,aa.deltaX,aa.deltaY]);if(N.val){N.val(O.str())}P.trigger("changedatetime.xdsoft");return false}});P.on("changedatetime.xdsoft",function(aa){if(g.onChangeDateTime&&a.isFunction(g.onChangeDateTime)){var ab=P.data("input");g.onChangeDateTime.call(P,O.currentTime,ab,aa);delete g.value;ab.trigger("change")}}).on("generate.xdsoft",function(){if(g.onGenerate&&a.isFunction(g.onGenerate)){g.onGenerate.call(P,O.currentTime,P.data("input"))}if(S){P.trigger("afterOpen.xdsoft");S=false}}).on("click.xdsoft",function(aa){aa.stopPropagation()});Z=0;J=function(){var ae=P.data("input").offset(),ad=ae.top+P.data("input")[0].offsetHeight-1,ac=ae.left,aa="absolute",ab;if(P.data("input").parent().css("direction")=="rtl"){ac-=(P.outerWidth()-P.data("input").outerWidth())}if(g.fixed){ad-=a(window).scrollTop();ac-=a(window).scrollLeft();aa="fixed"}else{if(ad+P[0].offsetHeight>a(window).height()+a(window).scrollTop()){ad=ae.top-P[0].offsetHeight+1}if(ad<0){ad=0}if(ac+P[0].offsetWidth>a(window).width()){ac=a(window).width()-P[0].offsetWidth}}ab=P[0];do{ab=ab.parentNode;if(window.getComputedStyle(ab).getPropertyValue("position")==="relative"&&a(window).width()>=ab.offsetWidth){ac=ac-((a(window).width()-ab.offsetWidth)/2);break}}while(ab.nodeName!=="HTML");P.css({left:ac,top:ad,position:aa})};P.on("open.xdsoft",function(ab){var ac=true;if(g.onShow&&a.isFunction(g.onShow)){ac=g.onShow.call(P,O.currentTime,P.data("input"),ab)}if(ac!==false){P.show();J();a(window).off("resize.xdsoft",J).on("resize.xdsoft",J);if(g.closeOnWithoutClick){a([document.body,window]).on("mousedown.xdsoft",function aa(){P.trigger("close.xdsoft");a([document.body,window]).off("mousedown.xdsoft",aa)})}}}).on("close.xdsoft",function(ab){var aa=true;U.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide();if(g.onClose&&a.isFunction(g.onClose)){aa=g.onClose.call(P,O.currentTime,P.data("input"),ab)}if(aa!==false&&!g.opened&&!g.inline){P.hide()}ab.stopPropagation()}).on("toggle.xdsoft",function(aa){if(P.is(":visible")){P.trigger("close.xdsoft")}else{P.trigger("open.xdsoft")}}).data("input",N);M=0;Y=0;P.data("xdsoft_datetime",O);P.setOptions(g);function K(){var aa=false,ab;if(g.startDate){aa=O.strToDate(g.startDate)}else{aa=g.value||((N&&N.val&&N.val())?N.val():"");if(aa){aa=O.strToDateTime(aa)}else{if(g.defaultDate){aa=O.strToDateTime(g.defaultDate);if(g.defaultTime){ab=O.strtotime(g.defaultTime);aa.setHours(ab.getHours());aa.setMinutes(ab.getMinutes())}}}}if(aa&&O.isValidDate(aa)){P.data("changed",true)}else{aa=""}return aa||0}O.setCurrentTime(K());N.data("xdsoft_datetimepicker",P).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(aa){if(N.is(":disabled")||(N.data("xdsoft_datetimepicker").is(":visible")&&g.closeOnInputClick)){return}clearTimeout(M);M=setTimeout(function(){if(N.is(":disabled")){return}S=true;O.setCurrentTime(K());P.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(ac){var ad=this.value,ab,aa=ac.which;if([m].indexOf(aa)!==-1&&g.enterLikeTab){ab=a("input:visible,textarea:visible");P.trigger("close.xdsoft");ab.eq(ab.index(this)+1).focus();return false}if([h].indexOf(aa)!==-1){P.trigger("close.xdsoft");return true}})};t=function(E){var F=E.data("xdsoft_datetimepicker");if(F){F.data("xdsoft_datetime",null);F.remove();E.data("xdsoft_datetimepicker",null).off(".xdsoft");a(window).off("resize.xdsoft");a([window,document.body]).off("mousedown.xdsoft");if(E.unmousewheel){E.unmousewheel()}}};a(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(E){if(E.keyCode===l){y=true}}).on("keyup.xdsoftctrl",function(E){if(E.keyCode===l){y=false}});return this.each(function(){var E=a(this).data("xdsoft_datetimepicker"),F;if(E){if(a.type(e)==="string"){switch(e){case"show":a(this).select().focus();E.trigger("open.xdsoft");break;case"hide":E.trigger("close.xdsoft");break;case"toggle":E.trigger("toggle.xdsoft");break;case"destroy":t(a(this));break;case"reset":this.value=this.defaultValue;if(!this.value||!E.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,g.format))){E.data("changed",false)}E.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":F=E.data("input");F.trigger("blur.xdsoft");break}}else{E.setOptions(e)}return 0}if(a.type(e)!=="string"){if(!g.lazyInit||g.open||g.inline){f(a(this))}else{j(a(this))}}})};a.fn.datetimepicker.defaults=b}(jQuery));function HighlightedDate(a,c,b){this.date=a;this.desc=c;this.style=b}(function(){
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.12
 *
 * Requires: jQuery 1.2.2+
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail" in g&&(m=-1*g.detail),"wheelDelta" in g&&(m=g.wheelDelta),"wheelDeltaY" in g&&(m=g.wheelDeltaY),"wheelDeltaX" in g&&(l=-1*g.wheelDeltaX),"axis" in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY" in g&&(m=-1*g.deltaY,j=m),"deltaX" in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else{if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks){for(var j=g.length;j;){a.event.fixHooks[g[--j]]=a.event.mouseHooks}}var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var c=h.length;c;){this.addEventListener(h[--c],b,!1)}}else{this.onmousewheel=b}a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var c=h.length;c;){this.removeEventListener(h[--c],b,!1)}}else{this.onmousewheel=null}a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent" in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(b){if(b=="unixtime"){return parseInt(this.getTime()/1000)}if(Date.formatFunctions[b]==null){Date.createNewFormat(b)}var a=Date.formatFunctions[b];return this[a]()};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var codePrefix="Date.prototype."+funcName+" = function() {return ";var code="";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code+="'"+String.escape(ch)+"' + "}else{code+=Date.getFormatCode(ch)}}}if(code.length==0){code='""'}else{code=code.substring(0,code.length-3)}eval(codePrefix+code+";}")};Date.getFormatCode=function(a){switch(a){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(a)+"' + "}};Date.parseDate=function(a,c){if(c=="unixtime"){return new Date(!isNaN(parseInt(a))?parseInt(a)*1000:0)}if(Date.parseFunctions[c]==null){Date.createParser(c)}var b=Date.parseFunctions[c];return Date[b](a)};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {";var regex="";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;regex+=String.escape(ch)}else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c}}}}code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}";code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}";Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$","i");eval(code)};Date.formatCodeToRegex=function(b,a){switch(b){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+a+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+a+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+a+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+a+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+a+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+a+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+a+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+a+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+a+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+a+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+a+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+a+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(b)}}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")};Date.prototype.getDayOfYear=function(){var a=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b){a+=Date.daysInMonth[b]}return a+this.getDate()};Date.prototype.getWeekOfYear=function(){var b=this.getDayOfYear()+(4-this.getDay());var a=new Date(this.getFullYear(),0,1);var c=(7-a.getDay()+4);return String.leftPad(Math.ceil((b-c)/7)+1,2,"0")};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return((a&3)==0&&(a%100||(a%400==0&&a)))};Date.prototype.getFirstDayOfMonth=function(){var a=(this.getDay()-(this.getDate()-1))%7;return(a<0)?(a+7):a};Date.prototype.getLastDayOfMonth=function(){var a=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return(a<0)?(a+7):a};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};String.escape=function(a){return a.replace(/('|\\)/g,"\\$1")};String.leftPad=function(d,b,c){var a=new String(d);if(c==null){c=" "}while(a.length<b){a=c+a}return a};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}());!function(bc,aU){function a1(d,b){for(var f,a=[],c=0;c<d.length;++c){if(f=aV[d[c]]||a0(d[c]),!f){throw"module definition dependecy not found: "+d[c]}a.push(f)}b.apply(null,a)}function a7(c,a,b){if("string"!=typeof c){throw"invalid module definition, module id must be defined and be a string"}if(a===aU){throw"invalid module definition, dependencies must be specified"}if(b===aU){throw"invalid module definition, definition function must be specified"}a1(a,function(){aV[c]=b.apply(null,arguments)})}function aW(a){return !!aV[a]}function a0(b){for(var d=bc,a=b.split(/[.\/]/),c=0;c<a.length;++c){if(!d[a[c]]){return}d=d[a[c]]}return d}function bg(g){for(var d=0;d<g.length;d++){for(var e=bc,f=g[d],b=f.split(/[.\/]/),c=0;c<b.length-1;++c){e[b[c]]===aU&&(e[b[c]]={}),e=e[b[c]]}e[b[b.length-1]]=aV[f]}}var aV={},aT="moxie/core/utils/Basic",be="moxie/core/I18n",a3="moxie/core/utils/Mime",bd="moxie/core/utils/Env",bb="moxie/core/utils/Dom",aZ="moxie/core/Exceptions",a8="moxie/core/EventTarget",a2="moxie/core/utils/Encode",a9="moxie/runtime/Runtime",aS="moxie/runtime/RuntimeClient",aP="moxie/file/Blob",aB="moxie/file/File",bh="moxie/file/FileInput",aj="moxie/file/FileDrop",aR="moxie/runtime/RuntimeTarget",aQ="moxie/file/FileReader",bf="moxie/core/utils/Url",aF="moxie/file/FileReaderSync",ag="moxie/xhr/FormData",ai="moxie/xhr/XMLHttpRequest",an="moxie/runtime/Transporter",aw="moxie/core/JSON",aC="moxie/image/Image",aq="moxie/runtime/html5/Runtime",ao="moxie/runtime/html5/file/Blob",ap="moxie/core/utils/Events",aD="moxie/runtime/html5/file/FileInput",aA="moxie/runtime/html5/file/FileDrop",am="moxie/runtime/html5/file/FileReader",ax="moxie/runtime/html5/xhr/XMLHttpRequest",aE="moxie/runtime/html5/utils/BinaryReader",af="moxie/runtime/html5/image/JPEGHeaders",az="moxie/runtime/html5/image/ExifParser",aO="moxie/runtime/html5/image/JPEG",aX="moxie/runtime/html5/image/PNG",a4="moxie/runtime/html5/image/ImageInfo",ac="moxie/runtime/html5/image/MegaPixel",a6="moxie/runtime/html5/image/Image",ae="moxie/runtime/flash/Runtime",ad="moxie/runtime/flash/file/Blob",ab="moxie/runtime/flash/file/FileInput",aN="moxie/runtime/flash/file/FileReader",ar="moxie/runtime/flash/file/FileReaderSync",aa="moxie/runtime/flash/xhr/XMLHttpRequest",au="moxie/runtime/flash/runtime/Transporter",al="moxie/runtime/flash/image/Image",aY="moxie/runtime/silverlight/Runtime",ba="moxie/runtime/silverlight/file/Blob",a5="moxie/runtime/silverlight/file/FileInput",aI="moxie/runtime/silverlight/file/FileDrop",aL="moxie/runtime/silverlight/file/FileReader",aK="moxie/runtime/silverlight/file/FileReaderSync",ah="moxie/runtime/silverlight/xhr/XMLHttpRequest",ay="moxie/runtime/silverlight/runtime/Transporter",aM="moxie/runtime/silverlight/image/Image",aG="moxie/runtime/html4/Runtime",aJ="moxie/runtime/html4/file/FileInput",ak="moxie/runtime/html4/file/FileReader",aH="moxie/runtime/html4/xhr/XMLHttpRequest",av="moxie/runtime/html4/image/Image";a7(aT,[],function(){var k=function(c){var a;return c===a?"undefined":null===c?"null":c.nodeType?"node":{}.toString.call(c).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},w=function(a){var c;return g(arguments,function(d,e){e>0&&g(d,function(l,i){l!==c&&(k(a[i])===k(l)&&~f(k(l),["array","object"])?w(a[i],l):a[i]=l)})}),a},g=function(u,l){var z,d,s,y;if(u){try{z=u.length}catch(c){z=y}if(z===y){for(d in u){if(u.hasOwnProperty(d)&&l(u[d],d)===!1){return}}}else{for(s=0;z>s;s++){if(l(u[s],s)===!1){return}}}}},j=function(a){var c;if(!a||"object"!==k(a)){return !0}for(c in a){return !1}return !0},b=function(c,l){function a(i){"function"===k(c[i])&&c[i](function(n){++i<e&&!n?a(i):l(n)})}var d=0,e=c.length;"function"!==k(l)&&(l=function(){}),c&&c.length||l(),a(d)},f=function(d,c){if(c){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(c,d)}for(var l=0,a=c.length;a>l;l++){if(c[l]===d){return l}}}return -1},q=function(c,e){var a=[];"array"!==k(c)&&(c=[c]),"array"!==k(e)&&(e=[e]);for(var d in c){-1===f(c[d],e)&&a.push(c[d])}return a.length?a:!1},x=function(d,c){var a=[];return g(d,function(i){-1!==f(i,c)&&a.push(i)}),a.length?a:null},v=function(c){var a,d=[];for(a=0;a<c.length;a++){d[a]=c[a]}return d},p=function(){var a=0;return function(d){var e=(new Date).getTime().toString(32),c;for(c=0;5>c;c++){e+=Math.floor(65535*Math.random()).toString(32)}return(d||"o_")+e+(a++).toString(32)}}(),h=function(a){return a?String.prototype.trim?String.prototype.trim.call(a):a.toString().replace(/^\s*/,"").replace(/\s*$/,""):a},m=function(c){if("string"!=typeof c){return c}var a={t:1099511627776,g:1073741824,m:1048576,k:1024},d;return c=/^([0-9]+)([mgk]?)$/.exec(c.toLowerCase().replace(/[^0-9mkg]/g,"")),d=c[2],c=+c[1],a.hasOwnProperty(d)&&(c*=a[d]),c};return{guid:p,typeOf:k,extend:w,each:g,isEmptyObj:j,inSeries:b,inArray:f,arrayDiff:q,arrayIntersect:x,toArray:v,trim:h,parseSizeStr:m}}),a7(be,[aT],function(b){var a={};return{addI18n:function(c){return b.extend(a,c)},translate:function(c){return a[c]||c},_:function(c){return this.translate(c)},sprintf:function(d){var e=[].slice.call(arguments,1),c="";return b.each(d.split(/%[a-z]/),function(f){c+=f,e.length&&(c+=e.shift())}),c}}}),a7(a3,[aT,be],function(c,b){var d="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/mp4,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",a={mimes:{},extensions:{},addMimeType:function(j){var g=j.split(/,/),k,f,h;for(k=0;k<g.length;k+=2){for(h=g[k+1].split(/ /),f=0;f<h.length;f++){this.mimes[h[f]]=g[k]}this.extensions[g[k]]=h}},extList2mimes:function(h,m){var g=this,k,l,e,j,f=[];for(l=0;l<h.length;l++){for(k=h[l].extensions.split(/\s*,\s*/),e=0;e<k.length;e++){if("*"===k[e]){return[]}if(j=g.mimes[k[e]]){-1===c.inArray(j,f)&&f.push(j)}else{if(!m||!/^\w+$/.test(k[e])){return[]}f.push("."+k[e])}}}return f},mimes2exts:function(f){var g=this,e=[];return c.each(f,function(h){if("*"===h){return e=[],!1}var i=h.match(/^(\w+)\/(\*|\w+)$/);i&&("*"===i[2]?c.each(g.extensions,function(k,j){new RegExp("^"+i[1]+"/").test(j)&&[].push.apply(e,g.extensions[j])}):g.extensions[h]&&[].push.apply(e,g.extensions[h]))}),e},mimes2extList:function(g){var e=[],f=[];return"string"===c.typeOf(g)&&(g=c.trim(g).split(/\s*,\s*/)),f=this.mimes2exts(g),e.push({title:b.translate("Files"),extensions:f.length?f.join(","):"*"}),e.mimes=g,e},getFileExtension:function(g){var f=g&&g.match(/\.([^.]+)$/);return f?f[1].toLowerCase():""},getFileMime:function(f){return this.mimes[this.getFileExtension(f)]||""}};return a.addMimeType(d),a}),a7(bd,[aT],function(h){function d(m){for(var l,p,a=0;a<m.length;a++){if(l=m[a].s1,p=m[a].prop,j=m[a].sv||m[a].id,l){if(-1!=l.indexOf(m[a].s2)){return m[a].id}}else{if(p){return m[a].id}}}}function k(i){var a=i.indexOf(j);if(-1!=a){return parseFloat(i.substring(a+j.length+1))}}var c=[{s1:navigator.userAgent,s2:"Android",id:"Android Browser",sv:"Version"},{s1:navigator.userAgent,s2:"Chrome",id:"Chrome"},{s1:navigator.vendor,s2:"Apple",id:"Safari",sv:"Version"},{prop:window.opera&&window.opera.buildNumber,id:"Opera",sv:"Version"},{s1:navigator.vendor,s2:"KDE",id:"Konqueror"},{s1:navigator.userAgent,s2:"Firefox",id:"Firefox"},{s1:navigator.vendor,s2:"Camino",id:"Camino"},{s1:navigator.userAgent,s2:"Netscape",id:"Netscape"},{s1:navigator.userAgent,s2:"MSIE",id:"IE",sv:"MSIE"},{s1:navigator.userAgent,s2:"Gecko",id:"Mozilla",sv:"rv"}],g=[{s1:navigator.platform,s2:"Win",id:"Windows"},{s1:navigator.platform,s2:"Mac",id:"Mac"},{s1:navigator.userAgent,s2:"iPhone",id:"iOS"},{s1:navigator.userAgent,s2:"iPad",id:"iOS"},{s1:navigator.userAgent,s2:"Android",id:"Android"},{s1:navigator.platform,s2:"Linux",id:"Linux"}],j,b=function(){var a={define_property:function(){return !1}(),create_canvas:function(){var i=document.createElement("canvas");return !(!i.getContext||!i.getContext("2d"))}(),return_response_type:function(l){try{if(-1!==h.inArray(l,["","text","document"])){return !0}if(window.XMLHttpRequest){var m=new XMLHttpRequest;if(m.open("get","/"),"responseType" in m){return m.responseType=l,m.responseType!==l?!1:!0}}}catch(e){}return !1},use_data_uri:function(){var i=new Image;return i.onload=function(){a.use_data_uri=1===i.width&&1===i.height},setTimeout(function(){i.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return a.use_data_uri&&("IE"!==f.browser||f.version>=9)},use_data_uri_of:function(i){return a.use_data_uri&&33000>i||a.use_data_uri_over32kb()},use_fileinput:function(){var i=document.createElement("input");return i.setAttribute("type","file"),!i.disabled}};return function(l){var e=[].slice.call(arguments);return e.shift(),"function"===h.typeOf(a[l])?a[l].apply(this,e):!!a[l]}}(),f={can:b,browser:d(c),version:k(navigator.userAgent)||k(navigator.appVersion),OS:d(g),swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return f}),a7(bb,[bd],function(h){var d=function(a){return"string"!=typeof a?a:document.getElementById(a)},k=function(i,a){var l;return""===i.className?!1:(l=new RegExp("(^|\\s+)"+a+"(\\s+|$)"),l.test(i.className))},c=function(i,a){k(i,a)||(i.className=""===i.className?a:i.className.replace(/\s+$/,"")+" "+a)},g=function(i,a){var l=new RegExp("(^|\\s+)"+a+"(\\s+|$)");i.className=i.className.replace(l,function(p,m,q){return" "===m&&" "===q?" ":""})},j=function(i,a){return i.currentStyle?i.currentStyle[a]:window.getComputedStyle?window.getComputedStyle(i,null)[a]:void 0},b=function(x,m){function p(z){var s,A,a=0,u=0;return z&&(A=z.getBoundingClientRect(),s="CSS1Compat"===y.compatMode?y.documentElement:y.body,a=A.left+s.scrollLeft,u=A.top+s.scrollTop),{x:a,y:u}}var e=0,l=0,v,y=document,w,q;if(x=x,m=m||y.body,x&&x.getBoundingClientRect&&"IE"===h.browser&&(!y.documentMode||y.documentMode<8)){return w=p(x),q=p(m),{x:w.x-q.x,y:w.y-q.y}}for(v=x;v&&v!=m&&v.nodeType;){e+=v.offsetLeft||0,l+=v.offsetTop||0,v=v.offsetParent}for(v=x.parentNode;v&&v!=m&&v.nodeType;){e-=v.scrollLeft||0,l-=v.scrollTop||0,v=v.parentNode}return{x:e,y:l}},f=function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}};return{get:d,hasClass:k,addClass:c,removeClass:g,getStyle:j,getPos:b,getSize:f}}),a7(aZ,[aT],function(b){function a(d,c){var f;for(f in d){if(d[f]===c){return f}}return null}return{RuntimeError:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": RuntimeError "+this.code}var c={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return b.extend(d,c),d.prototype=Error.prototype,d}(),OperationNotAllowedException:function(){function c(d){this.code=d,this.name="OperationNotAllowedException"}return b.extend(c,{NOT_ALLOWED_ERR:1}),c.prototype=Error.prototype,c}(),ImageError:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": ImageError "+this.code}var c={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return b.extend(d,c),d.prototype=Error.prototype,d}(),FileException:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": FileException "+this.code}var c={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return b.extend(d,c),d.prototype=Error.prototype,d}(),DOMException:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": DOMException "+this.code}var c={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return b.extend(d,c),d.prototype=Error.prototype,d}(),EventException:function(){function c(d){this.code=d,this.name="EventException"}return b.extend(c,{UNSPECIFIED_EVENT_TYPE_ERR:0}),c.prototype=Error.prototype,c}()}}),a7(a8,[aZ,aT],function(b,a){function c(){var d={};a.extend(this,{uid:null,init:function(){this.uid||(this.uid=a.guid("uid_"))},addEventListener:function(k,g,j,l){var f=this,h;return k=a.trim(k),/\s/.test(k)?(a.each(k.split(/\s+/),function(i){f.addEventListener(i,g,j,l)}),void 0):(k=k.toLowerCase(),j=parseInt(j,10)||0,h=d[this.uid]&&d[this.uid][k]||[],h.push({fn:g,priority:j,scope:l||this}),d[this.uid]||(d[this.uid]={}),d[this.uid][k]=h,void 0)},hasEventListener:function(f){return f?!(!d[this.uid]||!d[this.uid][f]):!!d[this.uid]},removeEventListener:function(h,f){h=h.toLowerCase();var g=d[this.uid]&&d[this.uid][h],j;if(g){if(f){for(j=g.length-1;j>=0;j--){if(g[j].fn===f){g.splice(j,1);break}}}else{g=[]}g.length||(delete d[this.uid][h],a.isEmptyObj(d[this.uid])&&delete d[this.uid])}},removeAllEventListeners:function(){d[this.uid]&&delete d[this.uid]},dispatchEvent:function(g){var j,k,e,h,f={};if("string"!==a.typeOf(g)){if(h=g,"string"!==a.typeOf(h.type)){throw new b.EventException(b.EventException.UNSPECIFIED_EVENT_TYPE_ERR)}g=h.type,h.total&&h.loaded&&(f.total=h.total,f.loaded=h.loaded),f.async=h.async||!1}if(-1!==g.indexOf("::")?function(i){j=i[0],g=i[1]}(g.split("::")):j=this.uid,g=g.toLowerCase(),k=d[j]&&d[j][g]){k.sort(function(m,i){return i.priority-m.priority}),e=[].slice.call(arguments),e.shift(),f.type=g,e.unshift(f);var l=[];a.each(k,function(i){e[0].target=i.scope,f.async?l.push(function(m){setTimeout(function(){m(i.fn.apply(i.scope,e)===!1)},1)}):l.push(function(m){m(i.fn.apply(i.scope,e)===!1)})}),l.length&&a.inSeries(l)}return !0},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(g){var h;"array"!==a.typeOf(g)&&(g=[g]);for(var f=0;f<g.length;f++){h="on"+g[f],"function"===a.typeOf(this[h])?this.addEventListener(g[f],this[h]):"undefined"===a.typeOf(this[h])&&(this[h]=null)}}})}return c.instance=new c,c}),a7(a2,[],function(){var c=function(f){return unescape(encodeURIComponent(f))},b=function(f){return decodeURIComponent(escape(f))},d=function(z,q){if("function"==typeof window.atob){return q?b(window.atob(z)):window.atob(z)}var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g,k,C,E,D,B,v,A,y=0,j=0,x="",t=[];if(!z){return z}z+="";do{E=w.indexOf(z.charAt(y++)),D=w.indexOf(z.charAt(y++)),B=w.indexOf(z.charAt(y++)),v=w.indexOf(z.charAt(y++)),A=E<<18|D<<12|B<<6|v,g=255&A>>16,k=255&A>>8,C=255&A,t[j++]=64==B?String.fromCharCode(g):64==v?String.fromCharCode(g,k):String.fromCharCode(g,k,C)}while(y<z.length);return x=t.join(""),q?b(x):x},a=function(F,q){if(q&&c(F),"function"==typeof window.btoa){return window.btoa(F)}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e,k,D,G,E,C,w,B,A=0,j=0,y="",v=[];if(!F){return F}do{e=F.charCodeAt(A++),k=F.charCodeAt(A++),D=F.charCodeAt(A++),B=e<<16|k<<8|D,G=63&B>>18,E=63&B>>12,C=63&B>>6,w=63&B,v[j++]=x.charAt(G)+x.charAt(E)+x.charAt(C)+x.charAt(w)}while(A<F.length);y=v.join("");var z=F.length%3;return(z?y.slice(0,z-3):y)+"===".slice(z||3)};return{utf8_encode:c,utf8_decode:b,atob:d,btoa:a}}),a7(a9,[aT,bb,a8],function(d,b,g){function a(h,e,p,t,q){function m(n,l){var s=null,u=h&&h.required_caps;return l=l||"browser",null!==this.mode?this.mode:(u&&!d.isEmptyObj(n)&&(d.each(u,function(w,r){if(n.hasOwnProperty(r)){var v=n[r](w);if("string"==typeof v&&(v=[v]),s){if(!(s=d.arrayIntersect(s,v))){return s=!1}}else{s=v}}}),s?this.mode=-1!==d.inArray(l,s)?l:s[0]:s===!1&&(this.mode=!1)),null===this.mode&&(this.mode=l),this.mode&&u&&!this.can(u)&&(this.mode=!1),void 0)}var i=this,k,j=d.guid(e+"_");f[j]=this,p=d.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},p),k=function(){var l={};return{exec:function(v,w,s,u){return k[w]&&(l[v]||(l[v]={context:this,instance:new k[w]}),l[v].instance[s])?l[v].instance[s].apply(this,u):void 0},removeInstance:function(n){delete l[n]},removeAllInstances:function(){var r=this;d.each(l,function(s,n){"function"===d.typeOf(s.instance.destroy)&&s.instance.destroy.call(s.context),r.removeInstance(n)})}}}(),d.extend(this,{initialized:!1,uid:j,type:e,mode:null,shimid:j+"_container",clients:0,options:h,can:function(l,v){var s=arguments[2]||p;if("string"===d.typeOf(l)&&"undefined"===d.typeOf(v)&&(l=a.parseCaps(l)),"object"===d.typeOf(l)){for(var u in l){if(!this.can(u,l[u],s)){return !1}}return !0}return"function"===d.typeOf(s[l])?s[l].call(this,v):v===s[l]},getShimContainer:function(){var r,l=b.get(this.shimid);return l||(r=this.options.container?b.get(this.options.container):document.body,l=document.createElement("div"),l.id=this.shimid,l.className="moxie-shim moxie-shim-"+this.type,d.extend(l.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),r.appendChild(l),r=null),l},getShim:function(){return k},shimExec:function(r,l){var s=[].slice.call(arguments,2);return i.getShim().exec.call(this,this.uid,r,l,s)},exec:function(r,l){var s=[].slice.call(arguments,2);return i[r]&&i[r][l]?i[r][l].apply(this,s):i.shimExec.apply(this,arguments)},destroy:function(){if(i){var l=b.get(this.shimid);l&&l.parentNode.removeChild(l),k&&k.removeAllInstances(),this.unbindAll(),delete f[this.uid],this.uid=null,j=i=k=l=null}}}),m.call(this,t,q)}var c={},f={};return a.order="html5,flash,silverlight,html4",a.getRuntime=function(h){return f[h]?f[h]:!1},a.addConstructor=function(i,h){h.prototype=g.instance,c[i]=h},a.getConstructor=function(h){return c[h]||null},a.getInfo=function(i){var h=a.getRuntime(i);return h?{uid:h.uid,type:h.type,can:function(){return h.can.apply(h,arguments)}}:null},a.parseCaps=function(e){var h={};return"string"!==d.typeOf(e)?e||{}:(d.each(e.split(","),function(i){h[i]=!0}),h)},a.can=function(j,h){var l,i=a.getConstructor(j),k;return i?(l=new i({required_caps:h}),k=l.mode,l.destroy(),!!k):!1},a.thatCan=function(j,h){var k=(h||a.order).split(/\s*,\s*/);for(var i in k){if(a.can(k[i],j)){return k[i]}}return null},a.capTrue=function(){return !0},a.capFalse=function(){return !1},a.capTest=function(h){return function(){return !!h}},a}),a7(aS,[aZ,aT,a9],function(c,b,d){return function a(){var e;b.extend(this,{connectRuntime:function(h){function i(k){var l,j;return k.length?(l=k.shift(),(j=d.getConstructor(l))?(e=new j(h),e.bind("Init",function(){e.initialized=!0,setTimeout(function(){e.clients++,f.trigger("RuntimeInit",e)},1)}),e.bind("Error",function(){e.destroy(),i(k)}),e.mode?(e.init(),void 0):(e.trigger("Error"),void 0)):(i(k),void 0)):(f.trigger("RuntimeError",new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR)),e=null,void 0)}var f=this,g;if("string"===b.typeOf(h)?g=h:"string"===b.typeOf(h.ruid)&&(g=h.ruid),g){if(e=d.getRuntime(g)){return e.clients++,e}throw new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR)}i((h.runtime_order||d.order).split(/\s*,\s*/))},getRuntime:function(){return e&&e.uid?e:(e=null,null)},disconnectRuntime:function(){e&&--e.clients<=0&&(e.destroy(),e=null)}})}}),a7(aP,[aT,a2,aS],function(d,b,f){function a(h,e){function g(j,m,l){var i,k=c[this.uid];return"string"===d.typeOf(k)&&k.length?(i=new a(null,{type:l,size:m-j}),i.detach(k.substr(j,i.size)),i):null}f.call(this),h&&this.connectRuntime(h),e?"string"===d.typeOf(e)&&(e={data:e}):e={},d.extend(this,{uid:e.uid||d.guid("uid_"),ruid:h,size:e.size||0,type:e.type||"",slice:function(j,i,k){return this.isDetached()?g.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),j,i,k)},getSource:function(){return c[this.uid]?c[this.uid]:null},detach:function(i){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy",c[this.uid]),this.disconnectRuntime(),this.ruid=null),i=i||"";var j=i.match(/^data:([^;]*);base64,/);j&&(this.type=j[1],i=b.atob(i.substring(i.indexOf("base64,")+7))),this.size=i.length,c[this.uid]=i},isDetached:function(){return !this.ruid&&"string"===d.typeOf(c[this.uid])},destroy:function(){this.detach(),delete c[this.uid]}}),e.data?this.detach(e.data):c[this.uid]=e}var c={};return a}),a7(aB,[aT,a3,aP],function(c,b,d){function a(f,h){var j,e;if(h||(h={}),e=h.type&&""!==h.type?h.type:b.getFileMime(h.name),h.name){j=h.name.replace(/\\/g,"/"),j=j.substr(j.lastIndexOf("/")+1)}else{var g=e.split("/")[0];j=c.guid((""!==g?g:"file")+"_"),b.extensions[e]&&(j+="."+b.extensions[e][0])}d.apply(this,arguments),c.extend(this,{type:e||"",name:j||c.guid("file_"),lastModifiedDate:h.lastModifiedDate||(new Date).toLocaleString()})}return a.prototype=d.prototype,a}),a7(bh,[aT,a3,bb,aZ,a8,be,aB,a9,aS],function(j,q,f,h,b,d,m,v,p){function k(a){var n=this,l,e,i;if(-1!==j.inArray(j.typeOf(a),["string","node"])&&(a={browse_button:a}),e=f.get(a.browse_button),!e){throw new h.DOMException(h.DOMException.NOT_FOUND_ERR)}i={accept:[{title:d.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:e.parentNode||document.body},a=j.extend({},i,a),"string"==typeof a.required_caps&&(a.required_caps=v.parseCaps(a.required_caps)),"string"==typeof a.accept&&(a.accept=q.mimes2extList(a.accept)),l=f.get(a.container),l||(l=document.body),"static"===f.getStyle(l,"position")&&(l.style.position="relative"),l=e=null,p.call(n),j.extend(n,{uid:j.guid("uid_"),ruid:null,files:null,init:function(){n.convertEventPropsToHandlers(g),n.bind("RuntimeInit",function(r,c){n.ruid=c.uid,n.bind("Ready",function(){n.trigger("Refresh")},999),n.bind("Change",function(){var s=c.exec.call(n,"FileInput","getFiles");n.files=[],j.each(s,function(t){return 0===t.size?!0:(n.files.push(new m(n.ruid,t)),void 0)})},999),n.bind("Refresh",function(){var w,y,u,x;u=f.get(a.browse_button),x=f.get(c.shimid),u&&(w=f.getPos(u,f.get(a.container)),y=f.getSize(u),x&&j.extend(x.style,{top:w.y+"px",left:w.x+"px",width:y.w+"px",height:y.h+"px"})),x=u=null}),c.exec.call(n,"FileInput","init",a)}),n.connectRuntime(j.extend({},a,{required_caps:{select_file:!0}}))},disable:function(c){var r=this.getRuntime();r&&r.exec.call(this,"FileInput","disable","undefined"===j.typeOf(c)?!0:c)},refresh:function(){n.trigger("Refresh")},destroy:function(){var c=this.getRuntime();c&&(c.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===j.typeOf(this.files)&&j.each(this.files,function(r){r.destroy()}),this.files=null}})}var g=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return k.prototype=b.instance,k}),a7(aj,[be,bb,aZ,aT,aB,aS,a8,a3],function(h,m,f,g,b,d,k,p){function l(i){var c=this,e;"string"==typeof i&&(i={drop_zone:i}),e={accept:[{title:h.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},i="object"==typeof i?g.extend({},e,i):e,i.container=m.get(i.drop_zone)||document.body,"static"===m.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=p.mimes2extList(i.accept)),d.call(c),g.extend(c,{uid:g.guid("uid_"),ruid:null,files:null,init:function(){c.convertEventPropsToHandlers(j),c.bind("RuntimeInit",function(n,a){c.ruid=a.uid,c.bind("Drop",function(){var q=a.exec.call(c,"FileDrop","getFiles");c.files=[],g.each(q,function(r){c.files.push(new b(c.ruid,r))})},999),a.exec.call(c,"FileDrop","init",i),c.dispatchEvent("ready")}),c.connectRuntime(i)},destroy:function(){var a=this.getRuntime();a&&(a.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var j=["ready","dragenter","dragleave","drop","error"];return l.prototype=k.instance,l}),a7(aR,[aT,aS,a8],function(c,b,d){function a(){this.uid=c.guid("uid_"),b.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return a.prototype=d.instance,a}),a7(aQ,[aT,a2,aZ,a8,aP,aB,aR],function(g,k,d,f,b,c,h){function l(){function a(t,q){function n(i){e.readyState=l.DONE,e.error=i,e.trigger("error"),u()}function u(){m.destroy(),m=null,e.trigger("loadend")}function r(i){m.bind("Error",function(v,p){n(p)}),m.bind("Progress",function(p){e.result=i.exec.call(m,"FileReader","getResult"),e.trigger(p)}),m.bind("Load",function(p){e.readyState=l.DONE,e.result=i.exec.call(m,"FileReader","getResult"),e.trigger(p),u()}),i.exec.call(m,"FileReader","read",t,q)}if(m=new h,this.convertEventPropsToHandlers(j),this.readyState===l.LOADING){return n(new d.DOMException(d.DOMException.INVALID_STATE_ERR))}if(this.readyState=l.LOADING,this.trigger("loadstart"),q instanceof b){if(q.isDetached()){var s=q.getSource();switch(t){case"readAsText":case"readAsBinaryString":this.result=s;break;case"readAsDataURL":this.result="data:"+q.type+";base64,"+k.btoa(s)}this.readyState=l.DONE,this.trigger("load"),u()}else{r(m.connectRuntime(q.ruid))}}else{n(new d.DOMException(d.DOMException.NOT_FOUND_ERR))}}var e=this,m;g.extend(this,{uid:g.guid("uid_"),readyState:l.EMPTY,result:null,error:null,readAsBinaryString:function(i){a.call(this,"readAsBinaryString",i)},readAsDataURL:function(i){a.call(this,"readAsDataURL",i)},readAsText:function(i){a.call(this,"readAsText",i)},abort:function(){this.result=null,-1===g.inArray(this.readyState,[l.EMPTY,l.DONE])&&(this.readyState===l.LOADING&&(this.readyState=l.DONE),m&&m.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),m&&(m.getRuntime().exec.call(this,"FileReader","destroy"),m.disconnectRuntime()),e=m=null}})}var j=["loadstart","progress","load","abort","error","loadend"];return l.EMPTY=0,l.LOADING=1,l.DONE=2,l.prototype=f.instance,l}),a7(bf,[],function(){var b=function(k){for(var g=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],m=g.length,f={http:80,https:443},j={},l=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,d=l.exec(k||"");m--;){d[m]&&(j[g[m]]=d[m])}if(/^[^\/]/.test(j.path)&&!j.scheme){var h=document.location.pathname;/(\/|\/[^\.]+)$/.test(h)||(h=h.replace(/[^\/]+$/,"")),j.host=document.location.hostname,j.path=h+(j.path||"")}return j.scheme||(j.scheme=document.location.protocol.replace(/:$/,"")),j.host||(j.host=document.location.hostname),j.port||(j.port=document.location.port||f[j.scheme]||80),j.port=parseInt(j.port,10),j.path||(j.path="/"),delete j.source,j},a=function(e){var f={http:80,https:443},d=b(e);return d.scheme+"://"+d.host+(d.port!==f[d.scheme]?":"+d.port:"")+d.path+(d.query?d.query:"")},c=function(d){function e(f){return[f.scheme,f.host,f.port].join("/")}return"string"==typeof d&&(d=b(d)),e(b())===e(d)};return{parseUrl:b,resolveUrl:a,hasSameOrigin:c}}),a7(aF,[aT,aS,a2],function(b,a,c){return function(){function d(l,h){if(!h.isDetached()){var g=this.connectRuntime(h.ruid).exec.call(this,"FileReaderSync","read",l,h);return this.disconnectRuntime(),g}var k=h.getSource();switch(l){case"readAsBinaryString":return k;case"readAsDataURL":return"data:"+h.type+";base64,"+c.btoa(k);case"readAsText":for(var m="",f=0,j=k.length;j>f;f++){m+=String.fromCharCode(k[f])}return m}}a.call(this),b.extend(this,{uid:b.guid("uid_"),readAsBinaryString:function(f){return d.call(this,"readAsBinaryString",f)},readAsDataURL:function(f){return d.call(this,"readAsDataURL",f)},readAsText:function(f){return d.call(this,"readAsText",f)}})}}),a7(ag,[aZ,aT,aP],function(c,b,d){function a(){var h,f={},g="";b.extend(this,{append:function(j,k){var e=this,i=b.typeOf(k);k instanceof d?(h&&delete f[h],h=j,f[j]=[k]):"array"===i?(j+="[]",b.each(k,function(l){e.append.call(e,j,l)})):"object"===i?b.each(k,function(m,l){e.append.call(e,j+"["+l+"]",m)}):(k=k.toString(),f[j]||(f[j]=[]),f[j].push(k))},hasBlob:function(){return !!h},getBlob:function(){return f[h]&&f[h][0]||null},getBlobName:function(){return h||null},each:function(i){b.each(f,function(j,e){b.each(j,function(k){i(k,e)})})},destroy:function(){h=null,g="",f={}}})}return a}),a7(ai,[aT,aZ,a8,a2,bf,a9,aR,aP,aF,ag,bd,a3],function(G,k,z,C,w,y,J,q,j,I,B,H){function F(){this.uid=G.guid("uid_")}function x(){function bk(n,g){return p.hasOwnProperty(n)?1===arguments.length?B.can("define_property")?p[n]:V[n]:(B.can("define_property")?p[n]=g:V[n]=g,void 0):void 0}function X(n){function g(){bi.destroy(),bi=null,u.dispatchEvent("loadend"),u=null}function v(L){bi.bind("LoadStart",function(M){bk("readyState",x.LOADING),u.dispatchEvent("readystatechange"),u.dispatchEvent(M),r&&u.upload.dispatchEvent(M)}),bi.bind("Progress",function(M){bk("readyState")!==x.LOADING&&(bk("readyState",x.LOADING),u.dispatchEvent("readystatechange")),u.dispatchEvent(M)}),bi.bind("UploadProgress",function(M){r&&u.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:M.total,loaded:M.loaded})}),bi.bind("Load",function(M){bk("readyState",x.DONE),bk("status",Number(L.exec.call(bi,"XMLHttpRequest","getStatus")||0)),bk("statusText",D[bk("status")]||""),bk("response",L.exec.call(bi,"XMLHttpRequest","getResponse",bk("responseType"))),~G.inArray(bk("responseType"),["text",""])?bk("responseText",bk("response")):"document"===bk("responseType")&&bk("responseXML",bk("response")),a=L.exec.call(bi,"XMLHttpRequest","getAllResponseHeaders"),u.dispatchEvent("readystatechange"),bk("status")>0?(r&&u.upload.dispatchEvent(M),u.dispatchEvent(M)):(m=!0,u.dispatchEvent("error")),g()}),bi.bind("Abort",function(M){u.dispatchEvent(M),g()}),bi.bind("Error",function(M){m=!0,bk("readyState",x.DONE),u.dispatchEvent("readystatechange"),Z=!0,u.dispatchEvent(M),g()}),L.exec.call(bi,"XMLHttpRequest","send",{url:bn,method:e,async:Y,user:s,password:bm,headers:K,mimeType:c,encoding:bj,responseType:u.responseType,withCredentials:u.withCredentials,options:t},n)}var u=this;l=(new Date).getTime(),bi=new J,"string"==typeof t.required_caps&&(t.required_caps=y.parseCaps(t.required_caps)),t.required_caps=G.extend({},t.required_caps,{return_response_type:u.responseType}),n instanceof I&&(t.required_caps.send_multipart=!0),i||(t.required_caps.do_cors=!0),t.ruid?v(bi.connectRuntime(t)):(bi.bind("RuntimeInit",function(M,L){v(L)}),bi.bind("RuntimeError",function(M,L){u.dispatchEvent("RuntimeError",L)}),bi.connectRuntime(t))}function bl(){bk("responseText",""),bk("responseXML",null),bk("response",null),bk("status",0),bk("statusText",""),l=at=null}var V=this,p={timeout:0,readyState:x.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},Y=!0,bn,e,K={},s,bm,bj=null,c=null,d=!1,h=!1,r=!1,Z=!1,m=!1,i=!1,l,at,W=null,f=null,t={},bi,a="",Q;G.extend(this,p,{uid:G.guid("uid_"),upload:new F,open:function(M,n,L,v,N){var g;if(!M||!n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(/[\u0100-\uffff]/.test(M)||C.utf8_encode(M)!==M){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(~G.inArray(M.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(e=M.toUpperCase()),~G.inArray(e,["CONNECT","TRACE","TRACK"])){throw new k.DOMException(k.DOMException.SECURITY_ERR)}if(n=C.utf8_encode(n),g=w.parseUrl(n),i=w.hasSameOrigin(g),bn=w.resolveUrl(n),(v||N)&&!i){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}if(s=v||g.user,bm=N||g.pass,Y=L||!0,Y===!1&&(bk("timeout")||bk("withCredentials")||""!==bk("responseType"))){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}d=!Y,h=!1,K={},bl.call(this),bk("readyState",x.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(n,u){var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(bk("readyState")!==x.OPENED||h){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(/[\u0100-\uffff]/.test(n)||C.utf8_encode(n)!==n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}return n=G.trim(n).toLowerCase(),~G.inArray(n,g)||/^(proxy\-|sec\-)/.test(n)?!1:(K[n]?K[n]+=", "+u:K[n]=u,!0)},getAllResponseHeaders:function(){return a||""},getResponseHeader:function(g){return g=g.toLowerCase(),m||~G.inArray(g,["set-cookie","set-cookie2"])?null:a&&""!==a&&(Q||(Q={},G.each(a.split(/\r\n/),function(u){var v=u.split(/:\s+/);2===v.length&&(v[0]=G.trim(v[0]),Q[v[0].toLowerCase()]={header:v[0],value:G.trim(v[1])})})),Q.hasOwnProperty(g))?Q[g].header+": "+Q[g].value:null},overrideMimeType:function(g){var n,u;if(~G.inArray(bk("readyState"),[x.LOADING,x.DONE])){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(g=G.trim(g.toLowerCase()),/;/.test(g)&&(n=g.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(g=n[1],n[2]&&(u=n[2])),!H.mimes[g]){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}W=g,f=u},send:function(v,g){if(t="string"===G.typeOf(g)?{ruid:g}:g?g:{},this.convertEventPropsToHandlers(A),this.upload.convertEventPropsToHandlers(A),this.readyState!==x.OPENED||h){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(v instanceof q){t.ruid=v.ruid,c=v.type||"application/octet-stream"}else{if(v instanceof I){if(v.hasBlob()){var u=v.getBlob();t.ruid=u.ruid,c=u.type||"application/octet-stream"}}else{"string"==typeof v&&(bj="UTF-8",c="text/plain;charset=UTF-8",v=C.utf8_encode(v))}}this.withCredentials||(this.withCredentials=t.required_caps&&t.required_caps.send_browser_cookies&&!i),r=!d&&this.upload.hasEventListener(),m=!1,Z=!v,d||(h=!0),X.call(this,v)},abort:function(){if(m=!0,d=!1,~G.inArray(bk("readyState"),[x.UNSENT,x.OPENED,x.DONE])){bk("readyState",x.UNSENT)}else{if(bk("readyState",x.DONE),h=!1,!bi){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}bi.getRuntime().exec.call(bi,"XMLHttpRequest","abort",Z),Z=!0}},destroy:function(){bi&&("function"===G.typeOf(bi.destroy)&&bi.destroy(),bi=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var D={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};F.prototype=z.instance;var A=["loadstart","progress","abort","error","load","timeout","loadend"],E=1,b=2;return x.UNSENT=0,x.OPENED=1,x.HEADERS_RECEIVED=2,x.LOADING=3,x.DONE=4,x.prototype=z.instance,x}),a7(an,[aT,a2,aS,a8],function(d,b,f,a){function c(){function h(){g=k=0,m=this.result=null}function e(r,s){var l=this;p=s,l.bind("TransportingProgress",function(i){k=i.loaded,g>k&&-1===d.inArray(l.state,[c.IDLE,c.DONE])&&n.call(l)},999),l.bind("TransportingComplete",function(){k=g,l.state=c.DONE,m=null,l.result=p.exec.call(l,"Transporter","getAsBlob",r||"")},999),l.state=c.BUSY,l.trigger("TransportingStarted"),n.call(l)}function n(){var r=this,s,l=g-k;j>l&&(j=l),s=b.btoa(m.substr(k,j)),p.exec.call(r,"Transporter","receive",s,g)}var q,p,m,g,k,j;f.call(this),d.extend(this,{uid:d.guid("uid_"),state:c.IDLE,result:null,transport:function(s,w,v){var i=this;if(v=d.extend({chunk_size:204798},v),(q=v.chunk_size%3)&&(v.chunk_size+=3-q),j=v.chunk_size,h.call(this),m=s,g=s.length,"string"===d.typeOf(v)||v.ruid){e.call(i,w,this.connectRuntime(v))}else{var l=function(u,r){i.unbind("RuntimeInit",l),e.call(i,w,r)};this.bind("RuntimeInit",l),this.connectRuntime(v)}},abort:function(){var i=this;i.state=c.IDLE,p&&(p.exec.call(i,"Transporter","clear"),i.trigger("TransportingAborted")),h.call(i)},destroy:function(){this.unbindAll(),p=null,this.disconnectRuntime(),h.call(this)}})}return c.IDLE=0,c.BUSY=1,c.DONE=2,c.prototype=a.instance,c}),a7(aw,[],function(){return !!window.JSON&&JSON.parse||function(){var t,j,m={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},b,h=function(a){throw {name:"SyntaxError",message:a,at:t,text:b}},x=function(a){return a&&a!==j&&h("Expected '"+a+"' instead of '"+j+"'"),j=b.charAt(t),t+=1,j},z=function(){var c,a="";for("-"===j&&(a="-",x("-"));j>="0"&&"9">=j;){a+=j,x()}if("."===j){for(a+=".";x()&&j>="0"&&"9">=j;){a+=j}}if("e"===j||"E"===j){for(a+=j,x(),("-"===j||"+"===j)&&(a+=j,x());j>="0"&&"9">=j;){a+=j,x()}}return c=+a,isFinite(c)?c:(h("Bad number"),void 0)},y=function(){var f,a,d="",c;if('"'===j){for(;x();){if('"'===j){return x(),d}if("\\"===j){if(x(),"u"===j){for(c=0,a=0;4>a&&(f=parseInt(x(),16),isFinite(f));a+=1){c=16*c+f}d+=String.fromCharCode(c)}else{if("string"!=typeof m[j]){break}d+=m[j]}}else{d+=j}}}h("Bad string")},w=function(){for(;j&&" ">=j;){x()}},k=function(){switch(j){case"t":return x("t"),x("r"),x("u"),x("e"),!0;case"f":return x("f"),x("a"),x("l"),x("s"),x("e"),!1;case"n":return x("n"),x("u"),x("l"),x("l"),null}h("Unexpected '"+j+"'")},v,q=function(){var a=[];if("["===j){if(x("["),w(),"]"===j){return x("]"),a}for(;j;){if(a.push(v()),w(),"]"===j){return x("]"),a}x(","),w()}}h("Bad array")},g=function(){var c,a={};if("{"===j){if(x("{"),w(),"}"===j){return x("}"),a}for(;j;){if(c=y(),w(),x(":"),Object.hasOwnProperty.call(a,c)&&h('Duplicate key "'+c+'"'),a[c]=v(),w(),"}"===j){return x("}"),a}x(","),w()}}h("Bad object")};return v=function(){switch(w(),j){case"{":return g();case"[":return q();case'"':return y();case"-":return z();default:return j>="0"&&"9">=j?z():k()}},function(e,c){var f;return b=e,t=0,j=" ",f=v(),w(),j&&h("Syntax error"),"function"==typeof c?function d(p,u){var a,l,s=p[u];if(s&&"object"==typeof s){for(a in s){Object.prototype.hasOwnProperty.call(s,a)&&(l=d(s,a),l!==aU?s[a]=l:delete s[a])}}return c.call(p,u,s)}({"":f},""):f}}()}),a7(aC,[aT,bb,aZ,aF,ai,a9,aS,an,bd,a8,aP,aB,a2,aw],function(z,E,k,w,b,j,C,F,D,B,v,A,y,g){function x(){function d(c){if(c||(c=this.getRuntime().exec.call(this,"Image","getInfo")),c){if("string"===z.typeOf(c.meta)){try{this.meta=g(c.meta)}catch(i){}}else{this.meta=c.meta}}z.extend(this,{size:parseInt(c.size,10),width:parseInt(c.width,10),height:parseInt(c.height,10),type:c.type}),""===this.name&&(this.name=c.name)}function h(l){var c=z.typeOf(l);try{if(l instanceof x){if(!l.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}e.apply(this,arguments)}else{if(l instanceof v){if(!~z.inArray(l.type,["image/jpeg","image/png"])){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}a.apply(this,arguments)}else{if(-1!==z.inArray(c,["blob","file"])){h.call(this,new A(null,l),arguments[1])}else{if("string"===c){/^data:[^;]*;base64,/.test(l)?h.call(this,new v(null,{data:l}),arguments[1]):f.apply(this,arguments)}else{if("node"!==c||"img"!==l.nodeName.toLowerCase()){throw new k.DOMException(k.DOMException.TYPE_MISMATCH_ERR)}h.call(this,l.src,arguments[1])}}}}}catch(m){this.trigger("error",m)}}function e(l,m){var c=this.connectRuntime(l.ruid);this.ruid=c.uid,c.exec.call(this,"Image","loadFromImage",l,"undefined"===z.typeOf(m)?!0:m)}function a(l,p){function c(i){m.ruid=i.uid,i.exec.call(m,"Image","loadFromBlob",l)}var m=this;m.name=l.name||"",l.isDetached()?(this.bind("RuntimeInit",function(n,i){c(i)}),p&&"string"==typeof p.required_caps&&(p.required_caps=j.parseCaps(p.required_caps)),this.connectRuntime(z.extend({required_caps:{access_image_binary:!0,resize_image:!0}},p))):c(this.connectRuntime(l.ruid))}function f(m,l){var p=this,c;c=new b,c.open("get",m),c.responseType="blob",c.onprogress=function(i){p.trigger(i)},c.onload=function(){a.call(p,c.response,!0)},c.onerror=function(i){p.trigger(i)},c.onloadend=function(){c.destroy()},c.bind("RuntimeError",function(n,i){p.trigger("RuntimeError",i)}),c.send(null,l)}C.call(this),z.extend(this,{uid:z.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){d.call(this)},999),this.convertEventPropsToHandlers(q),h.apply(this,arguments)},downsize:function(m,l,n,p){try{if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(this.width>x.MAX_RESIZE_WIDTH||this.height>x.MAX_RESIZE_HEIGHT){throw new k.ImageError(k.ImageError.MAX_RESOLUTION_ERR)}(!m&&!l||"undefined"===z.typeOf(n))&&(n=!1),m=m||this.width,l=l||this.height,p="undefined"===z.typeOf(p)?!0:!!p,this.getRuntime().exec.call(this,"Image","downsize",m,l,n,p)}catch(c){this.trigger("error",c)}},crop:function(i,c,l){this.downsize(i,c,!0,l)},getAsCanvas:function(){if(!D.can("create_canvas")){throw new k.RuntimeError(k.RuntimeError.NOT_SUPPORTED_ERR)}var c=this.connectRuntime(this.ruid);return c.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return i||(i="image/jpeg"),"image/jpeg"!==i||c||(c=90),this.getRuntime().exec.call(this,"Image","getAsBlob",i,c)},getAsDataURL:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return this.getRuntime().exec.call(this,"Image","getAsDataURL",i,c)},getAsBinaryString:function(i,c){var l=this.getAsDataURL(i,c);return y.atob(l.substring(l.indexOf("base64,")+7))},embed:function(H){function n(){if(D.can("create_canvas")){var c=M.getAsCanvas();if(c){return H.appendChild(c),c=null,M.destroy(),t.trigger("embedded"),void 0}}var i=M.getAsDataURL(K,G);if(!i){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}if(D.can("use_data_uri_of",i.length)){H.innerHTML='<img src="'+i+'" width="'+M.width+'" height="'+M.height+'" />',M.destroy(),t.trigger("embedded")}else{var l=new F;l.bind("TransportingComplete",function(){N=t.connectRuntime(this.result.ruid),t.bind("Embedded",function(){z.extend(N.getShimContainer().style,{top:"0px",left:"0px",width:M.width+"px",height:M.height+"px"}),N=null},999),N.exec.call(t,"ImageView","display",this.result.uid,u,I),M.destroy()}),l.transport(y.atob(i.substring(i.indexOf("base64,")+7)),K,z.extend({},s,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:H}))}}var t=this,M,K,G,J,s=arguments[1]||{},u=this.width,I=this.height,N;try{if(!(H=E.get(H))){throw new k.DOMException(k.DOMException.INVALID_NODE_TYPE_ERR)}if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(this.width>x.MAX_RESIZE_WIDTH||this.height>x.MAX_RESIZE_HEIGHT){throw new k.ImageError(k.ImageError.MAX_RESOLUTION_ERR)}if(K=s.type||this.type||"image/jpeg",G=s.quality||90,J="undefined"!==z.typeOf(s.crop)?s.crop:!1,s.width){u=s.width,I=s.height||u}else{var L=E.getSize(H);L.w&&L.h&&(u=L.w,I=L.h)}return M=new x,M.bind("Resize",function(){n.call(t)}),M.bind("Load",function(){M.downsize(u,I,J,!1)}),M.clone(this,!1),M}catch(O){this.trigger("error",O)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var q=["progress","load","error","resize","embedded"];return x.MAX_RESIZE_WIDTH=6500,x.MAX_RESIZE_HEIGHT=6500,x.prototype=B.instance,x}),a7(aq,[aT,aZ,a9,bd],function(g,d,j,c){function f(e){var k=this,i=j.capTest,a=j.capTrue,l=g.extend({access_binary:i(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return k.can("access_binary")&&!!b.Image},display_media:i(c.can("create_canvas")||c.can("use_data_uri_over32kb")),do_cors:i(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),drag_and_drop:i(function(){var m=document.createElement("div");return("draggable" in m||"ondragstart" in m&&"ondrop" in m)&&("IE"!==c.browser||c.version>9)}()),filter_by_extension:i(function(){return"Chrome"===c.browser&&c.version>=28||"IE"===c.browser&&c.version>=10}()),return_response_headers:a,return_response_type:function(m){return"json"===m?!0:c.can("return_response_type",m)},return_status_code:a,report_upload_progress:i(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return k.can("access_binary")&&c.can("create_canvas")},select_file:function(){return c.can("use_fileinput")&&window.File},select_folder:function(){return k.can("select_file")&&"Chrome"===c.browser&&c.version>=21},select_multiple:function(){return k.can("select_file")&&!("Safari"===c.browser&&"Windows"===c.OS)},send_binary_string:i(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:i(window.XMLHttpRequest),send_multipart:function(){return !!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||k.can("send_binary_string")},slice_blob:i(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return k.can("slice_blob")&&k.can("send_multipart")},summon_file_dialog:i(function(){return"Firefox"===c.browser&&c.version>=4||"Opera"===c.browser&&c.version>=12||"IE"===c.browser&&c.version>=10||!!~g.inArray(c.browser,["Chrome","Safari"])}()),upload_filesize:a},arguments[2]);j.call(this,e,arguments[1]||h,l),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(m){return function(){m.call(k),m=k=null}}(this.destroy)}),g.extend(this.getShim(),b)}var h="html5",b={};return j.addConstructor(h,f),b}),a7(ao,[aq,aP],function(b,a){function c(){function d(j,g,k){var f;if(!window.File.prototype.slice){return(f=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?f.call(j,g,k):null}try{return j.slice(),j.slice(g,k)}catch(h){return j.slice(g,k-g)}}this.slice=function(){return new a(this.getRuntime().uid,d.apply(this,arguments))}}return b.Blob=c}),a7(ap,[aT],function(h){function d(){this.returnValue=!1}function k(){this.cancelBubble=!0}var c={},g="moxie_"+h.guid(),j=function(p,i,n,m){var q,e;i=i.toLowerCase(),p.addEventListener?(q=n,p.addEventListener(i,q,!1)):p.attachEvent&&(q=function(){var a=window.event;a.target||(a.target=a.srcElement),a.preventDefault=d,a.stopPropagation=k,n(a)},p.attachEvent("on"+i,q)),p[g]||(p[g]=h.guid()),c.hasOwnProperty(p[g])||(c[p[g]]={}),e=c[p[g]],e.hasOwnProperty(i)||(e[i]=[]),e[i].push({func:q,orig:n,key:m})},b=function(l,r,p){var e,m;if(r=r.toLowerCase(),l[g]&&c[l[g]]&&c[l[g]][r]){e=c[l[g]][r];for(var i=e.length-1;i>=0&&(e[i].orig!==p&&e[i].key!==p||(l.removeEventListener?l.removeEventListener(r,e[i].func,!1):l.detachEvent&&l.detachEvent("on"+r,e[i].func),e[i].orig=null,e[i].func=null,e.splice(i,1),p===m));i--){}if(e.length||delete c[l[g]][r],h.isEmptyObj(c[l[g]])){delete c[l[g]];try{delete l[g]}catch(q){l[g]=m}}}},f=function(a,e){a&&a[g]&&h.each(c[a[g]],function(m,l){b(a,l,e)})};return{addEvent:j,removeEvent:b,removeAllEvents:f}}),a7(aD,[aq,aT,bb,ap,a3,bd],function(g,d,j,c,f,h){function b(){var k=[],i;d.extend(this,{init:function(y){var x=this,w=x.getRuntime(),n,v,t,a,q,e;i=y,k=[],t=i.accept.mimes||f.extList2mimes(i.accept,w.can("filter_by_extension")),v=w.getShimContainer(),v.innerHTML='<input id="'+w.uid+'" type="file" style="font-size:999px;opacity:0;"'+(i.multiple&&w.can("select_multiple")?"multiple":"")+(i.directory&&w.can("select_folder")?"webkitdirectory directory":"")+(t?' accept="'+t.join(",")+'"':"")+" />",n=j.get(w.uid),d.extend(n.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),a=j.get(i.browse_button),w.can("summon_file_dialog")&&("static"===j.getStyle(a,"position")&&(a.style.position="relative"),q=parseInt(j.getStyle(a,"z-index"),10)||1,a.style.zIndex=q,v.style.zIndex=q-1,c.addEvent(a,"click",function(m){var l=j.get(w.uid);l&&!l.disabled&&l.click(),m.preventDefault()},x.uid)),e=w.can("summon_file_dialog")?a:v,c.addEvent(e,"mouseover",function(){x.trigger("mouseenter")},x.uid),c.addEvent(e,"mouseout",function(){x.trigger("mouseleave")},x.uid),c.addEvent(e,"mousedown",function(){x.trigger("mousedown")},x.uid),c.addEvent(j.get(i.container),"mouseup",function(){x.trigger("mouseup")},x.uid),n.onchange=function r(){if(k=[],i.directory?d.each(this.files,function(m){"."!==m.name&&k.push(m)}):k=[].slice.call(this.files),"IE"!==h.browser){this.value=""}else{var l=this.cloneNode(!0);this.parentNode.replaceChild(l,this),l.onchange=r}x.trigger("change")},x.trigger({type:"ready",async:!0}),v=null},getFiles:function(){return k},disable:function(m){var l=this.getRuntime(),a;(a=j.get(l.uid))&&(a.disabled=!!m)},destroy:function(){var a=this.getRuntime(),e=a.getShimContainer();c.removeAllEvents(e,this.uid),c.removeAllEvents(i&&j.get(i.container),this.uid),c.removeAllEvents(i&&j.get(i.browse_button),this.uid),e&&(e.innerHTML=""),k=i=null}})}return g.FileInput=b}),a7(aA,[aq,aT,bb,ap,a3],function(d,b,g,a,c){function f(){function m(r){for(var s=[],l=0;l<r.length;l++){[].push.apply(s,r[l].extensions.split(/\s*,\s*/))}return -1===b.inArray("*",s)?s:[]}function p(l){var r=c.getFileExtension(l.name);return !r||!h.length||-1!==b.inArray(r,h)}function i(r,s){var l=[];b.each(r,function(t){l.push(function(e){k(t,e)})}),b.inSeries(l,function(){s()})}function k(r,l){r.isFile?r.file(function(s){p(s)&&q.push(s),l()},function(){l()}):r.isDirectory?j(r,l):l()}function j(v,s){function w(r){u.readEntries(function(e){e.length?([].push.apply(l,e),w(r)):r()},r)}var l=[],u=v.createReader();w(function(){i(l,s)})}var q=[],h=[],n;b.extend(this,{init:function(t){var l=this,e;n=t,h=m(n.accept),e=n.container,a.addEvent(e,"dragover",function(r){r.preventDefault(),r.stopPropagation(),r.dataTransfer.dropEffect="copy"},l.uid),a.addEvent(e,"drop",function(r){if(r.preventDefault(),r.stopPropagation(),q=[],r.dataTransfer.items&&r.dataTransfer.items[0].webkitGetAsEntry){var s=[];b.each(r.dataTransfer.items,function(u){s.push(u.webkitGetAsEntry())}),i(s,function(){l.trigger("drop")})}else{b.each(r.dataTransfer.files,function(u){p(u)&&q.push(u)}),l.trigger("drop")}},l.uid),a.addEvent(e,"dragenter",function(r){r.preventDefault(),r.stopPropagation(),l.trigger("dragenter")},l.uid),a.addEvent(e,"dragleave",function(r){r.preventDefault(),r.stopPropagation(),l.trigger("dragleave")},l.uid)},getFiles:function(){return q},destroy:function(){a.removeAllEvents(n&&g.get(n.container),this.uid),q=h=n=null}})}return d.FileDrop=f}),a7(am,[aq,a2,aT],function(c,b,d){function a(){function h(i){return b.atob(i.substring(i.indexOf("base64,")+7))}var f,g=!1;d.extend(this,{read:function(j,i){var k=this;f=new window.FileReader,f.addEventListener("progress",function(l){k.trigger(l)}),f.addEventListener("load",function(l){k.trigger(l)}),f.addEventListener("error",function(l){k.trigger(l,f.error)}),f.addEventListener("loadend",function(){f=null}),"function"===d.typeOf(f[j])?(g=!1,f[j](i.getSource())):"readAsBinaryString"===j&&(g=!0,f.readAsDataURL(i.getSource()))},getResult:function(){return f&&f.result?g?h(f.result):f.result:null},abort:function(){f&&f.abort()},destroy:function(){f=null}})}return c.FileReader=a}),a7(ax,[aq,aT,a3,bf,aB,aP,ag,aZ,bd,aw],function(j,q,f,h,b,d,m,v,p,k){function g(){function r(x,u){var y=this,l,w;l=u.getBlob().getSource(),w=new window.FileReader,w.onload=function(){u.append(u.getBlobName(),new d(null,{type:l.type,data:w.result})),self.send.call(y,x,u)},w.readAsBinaryString(l)}function a(){return !window.XMLHttpRequest||"IE"===p.browser&&p.version<8?function(){for(var u=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],l=0;l<u.length;l++){try{return new ActiveXObject(u[l])}catch(w){}}}():new window.XMLHttpRequest}function s(u){var l=u.responseXML,w=u.responseText;return"IE"===p.browser&&w&&l&&!l.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(u.getResponseHeader("Content-Type"))&&(l=new window.ActiveXObject("Microsoft.XMLDOM"),l.async=!1,l.validateOnParse=!1,l.loadXML(w)),l&&("IE"===p.browser&&0!==l.parseError||!l.documentElement||"parsererror"===l.documentElement.tagName)?null:l}function i(y){var w="----moxieboundary"+(new Date).getTime(),z="--",u="\r\n",x="",l=this.getRuntime();if(!l.can("send_binary_string")){throw new v.RuntimeError(v.RuntimeError.NOT_SUPPORTED_ERR)}return n.setRequestHeader("Content-Type","multipart/form-data; boundary="+w),y.each(function(A,t){x+=A instanceof d?z+w+u+'Content-Disposition: form-data; name="'+t+'"; filename="'+unescape(encodeURIComponent(A.name||"blob"))+'"'+u+"Content-Type: "+A.type+u+u+A.getSource()+u:z+w+u+'Content-Disposition: form-data; name="'+t+'"'+u+u+unescape(encodeURIComponent(A))+u}),x+=z+w+z+u}var n,c;q.extend(this,{send:function(z,w){var t=this,y="Mozilla"===p.browser&&p.version>=4&&p.version<7,x="Android Browser"===p.browser,e=!1;if(c=z.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),n=a(),n.open(z.method,z.url,z.async,z.user,z.password),w instanceof d){w.isDetached()&&(e=!0),w=w.getSource()}else{if(w instanceof m){if(w.hasBlob()){if(w.getBlob().isDetached()){w=i.call(t,w),e=!0}else{if((y||x)&&"blob"===q.typeOf(w.getBlob().getSource())&&window.FileReader){return r.call(t,z,w),void 0}}}if(w instanceof m){var u=new window.FormData;w.each(function(B,A){B instanceof d?u.append(A,B.getSource()):u.append(A,B)}),w=u}}}n.upload?(z.withCredentials&&(n.withCredentials=!0),n.addEventListener("load",function(A){t.trigger(A)}),n.addEventListener("error",function(A){t.trigger(A)}),n.addEventListener("progress",function(A){t.trigger(A)}),n.upload.addEventListener("progress",function(A){t.trigger({type:"UploadProgress",loaded:A.loaded,total:A.total})})):n.onreadystatechange=function l(){switch(n.readyState){case 1:break;case 2:break;case 3:var C,A;try{h.hasSameOrigin(z.url)&&(C=n.getResponseHeader("Content-Length")||0),n.responseText&&(A=n.responseText.length)}catch(B){C=A=0}t.trigger({type:"progress",lengthComputable:!!C,total:parseInt(C,10),loaded:A});break;case 4:n.onreadystatechange=function(){},0===n.status?t.trigger("error"):t.trigger("load")}},q.isEmptyObj(z.headers)||q.each(z.headers,function(B,A){n.setRequestHeader(A,B)}),""!==z.responseType&&"responseType" in n&&(n.responseType="json"!==z.responseType||p.can("return_response_type","json")?z.responseType:"text"),e?n.sendAsBinary?n.sendAsBinary(w):function(){for(var B=new Uint8Array(w.length),A=0;A<w.length;A++){B[A]=255&w.charCodeAt(A)}n.send(B.buffer)}():n.send(w),t.trigger("loadstart")},getStatus:function(){try{if(n){return n.status}}catch(l){}return 0},getResponse:function(y){var w=this.getRuntime();try{switch(y){case"blob":var u=new b(w.uid,n.response),z=n.getResponseHeader("Content-Disposition");if(z){var l=z.match(/filename=([\'\"'])([^\1]+)\1/);l&&(c=l[2])}return u.name=c,u.type||(u.type=f.getFileMime(c)),u;case"json":return p.can("return_response_type","json")?n.response:200===n.status?k(n.responseText):null;case"document":return s(n);default:return""!==n.responseText?n.responseText:null}}catch(x){return null}},getAllResponseHeaders:function(){try{return n.getAllResponseHeaders()}catch(l){}return""},abort:function(){n&&n.abort()},destroy:function(){self=c=null}})}return j.XMLHttpRequest=g}),a7(aE,[],function(){return function(){function c(k,j){var l=b?0:-8*(j-1),h=0,g;for(g=0;j>g;g++){h|=d.charCodeAt(k+g)<<Math.abs(l+8*g)}return h}function f(h,g,i){i=3===arguments.length?i:d.length-g-1,d=d.substr(0,g)+h+d.substr(i+g)}function a(l,j,h){var m="",g=b?0:-8*(h-1),k;for(k=0;h>k;k++){m+=String.fromCharCode(255&j>>Math.abs(g+8*k))}f(m,l,h)}var b=!1,d;return{II:function(g){return g===aU?b:(b=g,void 0)},init:function(g){b=!1,d=g},SEGMENT:function(j,h,g){switch(arguments.length){case 1:return d.substr(j,d.length-j-1);case 2:return d.substr(j,h);case 3:f(g,j,h);break;default:return d}},BYTE:function(e){return c(e,1)},SHORT:function(e){return c(e,2)},LONG:function(g,e){return e===aU?c(g,4):(a(g,e,4),void 0)},SLONG:function(e){var g=c(e,4);return g>2147483647?g-4294967296:g},STRING:function(g,h){var e="";for(h+=g;h>g;g++){e+=String.fromCharCode(c(g,1))}return e}}}}),a7(af,[aE],function(b){return function a(h){var d=[],f,g,c,e=0;if(f=new b,f.init(h),65496===f.SHORT(0)){for(g=2;g<=h.length;){if(c=f.SHORT(g),c>=65488&&65495>=c){g+=2}else{if(65498===c||65497===c){break}e=f.SHORT(g+2)+2,c>=65505&&65519>=c&&d.push({hex:c,name:"APP"+(15&c),start:g,length:e,segment:f.SEGMENT(g,e)}),g+=e}}return f.init(null),{headers:d,restore:function(j){var i,k;for(f.init(j),g=65504==f.SHORT(2)?4+f.SHORT(4):2,k=0,i=d.length;i>k;k++){f.SEGMENT(g,0,d[k].segment),g+=d[k].length}return j=f.SEGMENT(),f.init(null),j},strip:function(k){var m,j,l;for(j=new a(k),m=j.headers,j.purge(),f.init(k),l=m.length;l--;){f.SEGMENT(m[l].start,m[l].length,"")}return k=f.SEGMENT(),f.init(null),k},get:function(k){for(var i=[],l=0,j=d.length;j>l;l++){d[l].name===k.toUpperCase()&&i.push(d[l].segment)}return i},set:function(l,j){var p=[],k,m,i;for("string"==typeof j?p.push(j):p=j,k=m=0,i=d.length;i>k&&(d[k].name===l.toUpperCase()&&(d[k].segment=p[m],d[k].length=p[m].length,m++),!(m>=p.length));k++){}},purge:function(){d=[],f.init(null),f=null}}}}}),a7(az,[aT,aE],function(b,c){return function a(){function g(B,v){var x=e.SHORT(B),l,t,E,D,C,A,q,y,w=[],z={};for(l=0;x>l;l++){if(q=A=B+12*l+2,E=v[e.SHORT(q)],E!==aU){switch(D=e.SHORT(q+=2),C=e.LONG(q+=2),q+=4,w=[],D){case 1:case 7:for(C>4&&(q=e.LONG(q)+m.tiffHeader),t=0;C>t;t++){w[t]=e.BYTE(q+t)}break;case 2:C>4&&(q=e.LONG(q)+m.tiffHeader),z[E]=e.STRING(q,C-1);continue;case 3:for(C>2&&(q=e.LONG(q)+m.tiffHeader),t=0;C>t;t++){w[t]=e.SHORT(q+2*t)}break;case 4:for(C>1&&(q=e.LONG(q)+m.tiffHeader),t=0;C>t;t++){w[t]=e.LONG(q+4*t)}break;case 5:for(q=e.LONG(q)+m.tiffHeader,t=0;C>t;t++){w[t]=e.LONG(q+4*t)/e.LONG(q+4*t+4)}break;case 9:for(q=e.LONG(q)+m.tiffHeader,t=0;C>t;t++){w[t]=e.SLONG(q+4*t)}break;case 10:for(q=e.LONG(q)+m.tiffHeader,t=0;C>t;t++){w[t]=e.SLONG(q+4*t)/e.SLONG(q+4*t+4)}break;default:continue}y=1==C?w[0]:w,z[E]=d.hasOwnProperty(E)&&"object"!=typeof y?d[E][y]:y}}return z}function j(){var i=m.tiffHeader;return e.II(18761==e.SHORT(i)),42!==e.SHORT(i+=2)?!1:(m.IFD0=m.tiffHeader+e.LONG(i+=2),f=g(m.IFD0,h.tiff),"ExifIFDPointer" in f&&(m.exifIFD=m.tiffHeader+f.ExifIFDPointer,delete f.ExifIFDPointer),"GPSInfoIFDPointer" in f&&(m.gpsIFD=m.tiffHeader+f.GPSInfoIFDPointer,delete f.GPSInfoIFDPointer),!0)}function k(y,B,s){var w,p,q,A=0;if("string"==typeof B){var v=h[y.toLowerCase()];for(var z in v){if(v[z]===B){B=z;break}}}w=m[y.toLowerCase()+"IFD"],p=e.SHORT(w);for(var x=0;p>x;x++){if(q=w+12*x+2,e.SHORT(q)==B){A=q+8;break}}return A?(e.LONG(A,s),!0):!1}var e,h,f,m={},d;return e=new c,h={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},d={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(i){return m={tiffHeader:10},i!==aU&&i.length?(e.init(i),65505===e.SHORT(0)&&"EXIF\0"===e.STRING(4,5).toUpperCase()?j():!1):!1},TIFF:function(){return f},EXIF:function(){var i;if(i=g(m.exifIFD,h.exif),i.ExifVersion&&"array"===b.typeOf(i.ExifVersion)){for(var p=0,l="";p<i.ExifVersion.length;p++){l+=String.fromCharCode(i.ExifVersion[p])}i.ExifVersion=l}return i},GPS:function(){var i;return i=g(m.gpsIFD,h.gps),i.GPSVersionID&&"array"===b.typeOf(i.GPSVersionID)&&(i.GPSVersionID=i.GPSVersionID.join(".")),i},setExif:function(l,i){return"PixelXDimension"!==l&&"PixelYDimension"!==l?!1:k("exif",l,i)},getBinary:function(){return e.SEGMENT()},purge:function(){e.init(null),e=f=null,m={}}}}}),a7(aO,[aT,aZ,af,aE,az],function(d,b,g,a,c){function f(h){function n(){for(var p=0,l,s;p<=q.length;){if(l=m.SHORT(p+=2),l>=65472&&65475>=l){return p+=5,{height:m.SHORT(p),width:m.SHORT(p+=2)}}s=m.SHORT(p+=2),p+=s-2}return null}function r(){k&&i&&m&&(k.purge(),i.purge(),m.init(null),q=j=i=k=m=null)}var q,m,i,k,j,e;if(q=h,m=new a,m.init(q),65496!==m.SHORT(0)){throw new b.ImageError(b.ImageError.WRONG_FORMAT)}i=new g(h),k=new c,e=!!k.init(i.get("app1")[0]),j=n.call(this),d.extend(this,{type:"image/jpeg",size:q.length,width:j&&j.width||0,height:j&&j.height||0,setExif:function(l,p){return e?("object"===d.typeOf(l)?d.each(l,function(u,s){k.setExif(s,u)}):k.setExif(l,p),i.set("app1",k.getBinary()),void 0):!1},writeHeaders:function(){return arguments.length?i.restore(arguments[0]):q=i.restore(q)},stripHeaders:function(l){return i.strip(l)},purge:function(){r.call(this)}}),e&&(this.meta={tiff:k.TIFF(),exif:k.EXIF(),gps:k.GPS()})}return f}),a7(aX,[aZ,aT,aE],function(c,b,d){function a(h){function e(){var l,i;return l=m.call(this,8),"IHDR"==l.type?(i=l.start,{width:n.LONG(i),height:n.LONG(i+=4)}):null}function f(){n&&(n.init(null),p=j=k=g=n=null)}function m(u){var q,v,l,s;return q=n.LONG(u),v=n.STRING(u+=4,4),l=u+=4,s=n.LONG(u+q),{length:q,type:v,start:l,CRC:s}}var p,n,k,g,j;p=h,n=new d,n.init(p),function(){var q=0,r=0,l=[35152,20039,3338,6666];for(r=0;r<l.length;r++,q+=2){if(l[r]!=n.SHORT(q)){throw new c.ImageError(c.ImageError.WRONG_FORMAT)}}}(),j=e.call(this),b.extend(this,{type:"image/png",size:p.length,width:j.width,height:j.height,purge:function(){f.call(this)}}),f.call(this)}return a}),a7(a4,[aT,aZ,aO,aX],function(c,b,d,a){return function(f){var g=[d,a],e;e=function(){for(var h=0;h<g.length;h++){try{return new g[h](f)}catch(i){}}throw new b.ImageError(b.ImageError.WRONG_FORMAT)}(),c.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(h){return h},stripHeaders:function(h){return h},purge:function(){}}),c.extend(this,e),this.purge=function(){e.purge(),e=null}}}),a7(ac,[],function(){function b(M,I,C){var F=M.naturalWidth,P=M.naturalHeight,B=C.width,z=C.height,O=C.x||0,H=C.y||0,N=I.getContext("2d");a(M)&&(F/=2,P/=2);var L=1024,D=document.createElement("canvas");D.width=D.height=L;for(var J=D.getContext("2d"),G=c(M,F,P),K=0;P>K;){for(var t=K+L>P?P-K:L,k=0;F>k;){var A=k+L>F?F-k:L;J.clearRect(0,0,L,L),J.drawImage(M,-k,-K);var Q=k*B/F+O<<0,j=Math.ceil(A*B/F),q=K*z/P/G+H<<0,n=Math.ceil(t*z/P/G);N.drawImage(D,0,0,A,t,Q,q,j,n),k+=L}K+=L}D=J=null}function a(h){var f=h.naturalWidth,j=h.naturalHeight;if(f*j>1048576){var d=document.createElement("canvas");d.width=d.height=1;var g=d.getContext("2d");return g.drawImage(h,-f+1,0),0===g.getImageData(0,0,1,1).data[3]}return !1}function c(k,v,g){var j=document.createElement("canvas");j.width=1,j.height=g;var d=j.getContext("2d");d.drawImage(k,0,0);for(var f=d.getImageData(0,0,1,g).data,p=0,w=g,q=g;q>p;){var m=f[4*(q-1)+3];0===m?w=q:p=q,q=w+p>>1}j=null;var h=q/g;return 0===h?1:h}return{isSubsampled:a,renderTo:b}}),a7(a6,[aq,aT,aZ,a2,aP,a4,ac,a3,bd],function(h,m,f,g,b,d,k,p,l){function j(){function u(){if(!G&&!C){throw new f.ImageError(f.DOMException.INVALID_STATE_ERR)}return G||C}function A(c){return g.atob(c.substring(c.indexOf("base64,")+7))}function n(v,c){return"data:"+(c||"")+";base64,"+g.btoa(v)}function z(v){var c=this;C=new Image,C.onerror=function(){s.call(this),c.trigger("error",new f.ImageError(f.ImageError.WRONG_FORMAT))},C.onload=function(){c.trigger("load")},C.src=/^data:[^;]*;base64,/.test(v)?v:n(v,F.type)}function t(x,v){var c=this,w;return window.FileReader?(w=new FileReader,w.onload=function(){v(this.result)},w.onerror=function(){c.trigger("error",new f.FileException(f.FileException.NOT_READABLE_ERR))},w.readAsDataURL(x),void 0):v(x.getAsDataURL())}function a(E,K,e,x){var Q=this,T,S,O,J,N,M,w,L,R;if(B=x,R=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==m.inArray(R,[5,6,7,8])){var P=E;E=K,K=P}return M=u(),O=e?Math.max:Math.min,S=O(E/M.width,K/M.height),S>1&&(!e||x)?(this.trigger("Resize"),void 0):(w=Math.round(M.width*S),L=Math.round(M.height*S),G||(G=document.createElement("canvas")),T=G.getContext("2d"),e?(G.width=E,G.height=K):(G.width=w,G.height=L),J=w>G.width?Math.round((w-G.width)/2):0,N=L>G.height?Math.round((L-G.height)/2):0,B||i(G.width,G.height,R),r.call(this,M,G,-J,-N,w,L),this.width=G.width,this.height=G.height,D=!0,Q.trigger("Resize"),void 0)}function r(y,v,J,c,x,E){if("iOS"===l.OS){k.renderTo(y,v,{width:x,height:E,x:J,y:c})}else{var w=v.getContext("2d");w.drawImage(y,J,c,x,E)}}function i(w,v,x){switch(x){case 5:case 6:case 7:case 8:G.width=v,G.height=w;break;default:G.width=w,G.height=v}var c=G.getContext("2d");switch(x){case 2:c.translate(w,0),c.scale(-1,1);break;case 3:c.translate(w,v),c.rotate(Math.PI);break;case 4:c.translate(0,v),c.scale(1,-1);break;case 5:c.rotate(0.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(0.5*Math.PI),c.translate(0,-v);break;case 7:c.rotate(0.5*Math.PI),c.translate(w,-v),c.scale(-1,1);break;case 8:c.rotate(-0.5*Math.PI),c.translate(-w,0)}}function s(){I&&(I.purge(),I=null),q=C=G=F=null,D=!1}var H=this,C,I,G,q,F,D=!1,B=!0;m.extend(this,{loadFromBlob:function(x){var v=this,c=v.getRuntime(),w=arguments.length>1?arguments[1]:!0;if(!c.can("access_binary")){throw new f.RuntimeError(f.RuntimeError.NOT_SUPPORTED_ERR)}return F=x,x.isDetached()?(q=x.getSource(),z.call(this,q),void 0):(t.call(this,x.getSource(),function(y){w&&(q=A(y)),z.call(v,y)}),void 0)},loadFromImage:function(v,c){this.meta=v.meta,F=new b(null,{name:v.name,size:v.size,type:v.type}),z.call(this,c?q=v.getAsBinaryString():v.getAsDataURL())},getInfo:function(){var c=this.getRuntime(),e;return !I&&q&&c.can("access_image_binary")&&(I=new d(q)),e={width:u().width||0,height:u().height||0,type:F.type||p.getFileMime(F.name),size:q&&q.length||F.size||0,name:F.name||"",meta:I&&I.meta||this.meta||{}}},downsize:function(){a.apply(this,arguments)},getAsCanvas:function(){return G&&(G.id=this.uid+"_canvas"),G},getAsBlob:function(v,c){return v!==this.type&&a.call(this,this.width,this.height,!1),new b(null,{type:v,data:H.getAsBinaryString.call(this,v,c)})},getAsDataURL:function(v){var c=arguments[1]||90;if(!D){return C.src}if("image/jpeg"!==v){return G.toDataURL("image/png")}try{return G.toDataURL("image/jpeg",c/100)}catch(w){return G.toDataURL("image/jpeg")}},getAsBinaryString:function(w,v){if(!D){return q||(q=A(H.getAsDataURL(w,v))),q}if("image/jpeg"!==w){q=A(H.getAsDataURL(w,v))}else{var x;v||(v=90);try{x=G.toDataURL("image/jpeg",v/100)}catch(c){x=G.toDataURL("image/jpeg")}q=A(x),I&&(q=I.stripHeaders(q),B&&(I.meta&&I.meta.exif&&I.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),q=I.writeHeaders(q)),I.purge(),I=null)}return D=!1,q},destroy:function(){H=null,s.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return h.Image=j}),a7(ae,[aT,bd,bb,aZ,a9],function(g,k,d,f,b){function c(){var i;try{i=navigator.plugins["Shockwave Flash"],i=i.description}catch(a){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(m){i="0.0"}}return i=i.match(/\d+/g),parseFloat(i[0]+"."+i[1])}function h(i){var m=this,e;i=g.extend({swf_url:k.swf_url},i),b.call(this,i,l,{access_binary:function(a){return a&&"browser"===m.mode},access_image_binary:function(a){return a&&"browser"===m.mode},display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===m.mode},resize_image:b.capTrue,return_response_headers:!1,return_response_type:function(a){return !g.arrayDiff(a,["","text","json","document"])||"browser"===m.mode},return_status_code:function(a){return"browser"===m.mode||!g.arrayDiff(a,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:function(a){return a&&"browser"===m.mode},send_browser_cookies:function(a){return a&&"browser"===m.mode},send_custom_headers:function(a){return a&&"browser"===m.mode},send_multipart:b.capTrue,slice_blob:b.capTrue,stream_upload:function(a){return a&&"browser"===m.mode},summon_file_dialog:!1,upload_filesize:function(a){return g.parseSizeStr(a)<=2097152||"client"===m.mode},use_http_method:function(a){return !g.arrayDiff(a,["GET","POST"])}},{access_binary:function(a){return a?"browser":"client"},access_image_binary:function(a){return a?"browser":"client"},report_upload_progress:function(a){return a?"browser":"client"},return_response_type:function(a){return g.arrayDiff(a,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(a){return g.arrayDiff(a,[200,404])?"browser":["client","browser"]},send_binary_string:function(a){return a?"browser":"client"},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"browser":"client"},stream_upload:function(a){return a?"client":"browser"},upload_filesize:function(a){return g.parseSizeStr(a)>=2097152?"client":"browser"}},"client"),c()<10&&(this.mode=!1),g.extend(this,{getShim:function(){return d.get(this.uid)},shimExec:function(p,a){var q=[].slice.call(arguments,2);return m.getShim().exec(this.uid,p,a,q)},init:function(){var q,a,p;p=this.getShimContainer(),g.extend(p.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),q='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+i.swf_url+'" ',"IE"===k.browser&&(q+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),q+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+i.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+k.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===k.browser?(a=document.createElement("div"),p.appendChild(a),a.outerHTML=q,a=p=null):p.innerHTML=q,e=setTimeout(function(){m&&!m.initialized&&m.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR))},5000)},destroy:function(a){return function(){a.call(m),clearTimeout(e),i=e=a=m=null}}(this.destroy)},j)}var l="flash",j={};return b.addConstructor(l,h),j}),a7(ad,[ae,aP],function(b,a){var c={slice:function(g,j,d,f){var h=this.getRuntime();return 0>j?j=Math.max(g.size+j,0):j>0&&(j=Math.min(j,g.size)),0>d?d=Math.max(g.size+d,0):d>0&&(d=Math.min(d,g.size)),g=h.shimExec.call(this,"Blob","slice",j,d,f||""),g&&(g=new a(h.uid,g)),g}};return b.Blob=c}),a7(ab,[ae],function(b){var a={init:function(c){this.getRuntime().shimExec.call(this,"FileInput","init",{name:c.name,accept:c.accept,multiple:c.multiple}),this.trigger("ready")}};return b.FileInput=a}),a7(aN,[ae,a2],function(d,b){function f(g,h){switch(h){case"readAsText":return b.atob(g,"utf8");case"readAsBinaryString":return b.atob(g);case"readAsDataURL":return g}return null}var a="",c={read:function(i,g){var h=this,j=h.getRuntime();return"readAsDataURL"===i&&(a="data:"+(g.type||"")+";base64,"),h.bind("Progress",function(e,k){k&&(a+=f(k,i))}),j.shimExec.call(this,"FileReader","readAsBase64",g.uid)},getResult:function(){return a},destroy:function(){a=null}};return d.FileReader=c}),a7(ar,[ae,a2],function(c,b){function d(f,g){switch(g){case"readAsText":return b.atob(f,"utf8");case"readAsBinaryString":return b.atob(f);case"readAsDataURL":return f}return null}var a={read:function(j,g){var f,h=this.getRuntime();return(f=h.shimExec.call(this,"FileReaderSync","readAsBase64",g.uid))?("readAsDataURL"===j&&(f="data:"+(g.type||"")+";base64,"+f),d(f,j,g.type)):null}};return c.FileReaderSync=a}),a7(aa,[ae,aT,aP,aB,aF,ag,an,aw],function(g,k,d,f,b,c,h,l){var j={send:function(q,n){function a(){q.transport=m.mode,m.shimExec.call(v,"XMLHttpRequest","send",q,n)}function x(r,i){m.shimExec.call(v,"XMLHttpRequest","appendBlob",r,i.uid),n=null,a()}function w(r,i){var s=new h;s.bind("TransportingComplete",function(){i(this.result)}),s.transport(r.getSource(),r.type,{ruid:m.uid})}var v=this,m=v.getRuntime();if(k.isEmptyObj(q.headers)||k.each(q.headers,function(r,i){m.shimExec.call(v,"XMLHttpRequest","setRequestHeader",i,r.toString())}),n instanceof c){var t;if(n.each(function(r,i){r instanceof d?t=i:m.shimExec.call(v,"XMLHttpRequest","append",i,r)}),n.hasBlob()){var p=n.getBlob();p.isDetached()?w(p,function(i){p.destroy(),x(t,i)}):x(t,p)}else{n=null,a()}}else{n instanceof d?n.isDetached()?w(n,function(i){n.destroy(),n=i.uid,a()}):(n=n.uid,a()):a()}},getResponse:function(p){var r,q,i=this.getRuntime();if(q=i.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(q=new f(i.uid,q),"blob"===p){return q}if(~k.inArray(p,["","text"])){return r=new b,r.readAsText(q)}if("arraybuffer"===p){}else{if("json"===p){r=new b;try{return l(r.readAsText(q))}catch(m){return null}}}}return null},abort:function(i){var a=this.getRuntime();a.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return g.XMLHttpRequest=j}),a7(au,[ae,aP],function(b,a){var c={getAsBlob:function(f){var g=this.getRuntime(),d=g.shimExec.call(this,"Transporter","getAsBlob",f);return d?new a(g.uid,d):null}};return b.Transporter=c}),a7(al,[ae,aT,an,aP,aF],function(d,b,g,a,c){var f={loadFromBlob:function(l){function j(i){k.shimExec.call(h,"Image","loadFromBlob",i.uid),h=k=null}var h=this,k=h.getRuntime();if(l.isDetached()){var m=new g;m.bind("TransportingComplete",function(){j(m.result.getSource())}),m.transport(l.getSource(),l.type,{ruid:k.uid})}else{j(l.getSource())}},loadFromImage:function(i){var h=this.getRuntime();return h.shimExec.call(this,"Image","loadFromImage",i.uid)},getAsBlob:function(j,h){var k=this.getRuntime(),i=k.shimExec.call(this,"Image","getAsBlob",j,h);return i?new a(k.uid,i):null},getAsDataURL:function(){var i=this.getRuntime(),h=i.Image.getAsBlob.apply(this,arguments),j;return h?(j=new c,j.readAsDataURL(h)):null}};return d.Image=f}),a7(aY,[aT,bd,bb,aZ,a9],function(g,k,d,f,b){function c(x){var C=!1,q=null,w,m,p,A,D,B=0;try{try{q=new ActiveXObject("AgControl.AgControl"),q.IsVersionSupported(x)&&(C=!0),q=null}catch(z){var v=navigator.plugins["Silverlight Plug-In"];if(v){for(w=v.description,"1.0.30226.2"===w&&(w="2.0.30226.2"),m=w.split(".");m.length>3;){m.pop()}for(;m.length<4;){m.push(0)}for(p=x.split(".");p.length>4;){p.pop()}do{A=parseInt(p[B],10),D=parseInt(m[B],10),B++}while(B<p.length&&A===D);D>=A&&!isNaN(A)&&(C=!0)}}}catch(y){C=!1}return C}function h(i){var m=this,e;i=g.extend({xap_url:k.xap_url},i),b.call(this,i,l,{access_binary:b.capTrue,access_image_binary:b.capTrue,display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:b.capTrue,resize_image:b.capTrue,return_response_headers:function(a){return a&&"client"===m.mode},return_response_type:b.capTrue,return_status_code:function(a){return"client"===m.mode||!g.arrayDiff(a,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:b.capTrue,send_browser_cookies:function(a){return a&&"browser"===m.mode},send_custom_headers:function(a){return a&&"client"===m.mode},send_multipart:b.capTrue,slice_blob:b.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:b.capTrue,use_http_method:function(a){return"client"===m.mode||!g.arrayDiff(a,["GET","POST"])}},{return_response_headers:function(a){return a?"client":"browser"},return_status_code:function(a){return g.arrayDiff(a,[200,404])?"client":["client","browser"]},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"client":"browser"},use_http_method:function(a){return g.arrayDiff(a,["GET","POST"])?"client":["client","browser"]}}),c("2.0.31005.0")&&"Opera"!==k.browser||(this.mode=!1),g.extend(this,{getShim:function(){return d.get(this.uid).content.Moxie},shimExec:function(p,a){var q=[].slice.call(arguments,2);return m.getShim().exec(this.uid,p,a,q)},init:function(){var a;a=this.getShimContainer(),a.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+i.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+k.global_event_dispatcher+'"/></object>',e=setTimeout(function(){m&&!m.initialized&&m.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR))},"Windows"!==k.OS?10000:5000)},destroy:function(a){return function(){a.call(m),clearTimeout(e),i=e=a=m=null}}(this.destroy)},j)}var l="silverlight",j={};return b.addConstructor(l,h),j}),a7(ba,[aY,aT,ad],function(b,a,c){return b.Blob=a.extend({},c)}),a7(a5,[aY],function(b){var a={init:function(d){function c(g){for(var f="",h=0;h<g.length;h++){f+=(""!==f?"|":"")+g[h].title+" | *."+g[h].extensions.replace(/,/g,";*.")}return f}this.getRuntime().shimExec.call(this,"FileInput","init",c(d.accept),d.name,d.multiple),this.trigger("ready")}};return b.FileInput=a}),a7(aI,[aY,bb,ap],function(c,b,d){var a={init:function(){var h=this,f=h.getRuntime(),g;return g=f.getShimContainer(),d.addEvent(g,"dragover",function(i){i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect="copy"},h.uid),d.addEvent(g,"dragenter",function(i){i.preventDefault();var j=b.get(f.uid).dragEnter(i);j&&i.stopPropagation()},h.uid),d.addEvent(g,"drop",function(i){i.preventDefault();var j=b.get(f.uid).dragDrop(i);j&&i.stopPropagation()},h.uid),f.shimExec.call(this,"FileDrop","init")}};return c.FileDrop=a}),a7(aL,[aY,aT,aN],function(b,a,c){return b.FileReader=a.extend({},c)}),a7(aK,[aY,aT,ar],function(b,a,c){return b.FileReaderSync=a.extend({},c)}),a7(ah,[aY,aT,aa],function(b,a,c){return b.XMLHttpRequest=a.extend({},c)}),a7(ay,[aY,aT,au],function(b,a,c){return b.Transporter=a.extend({},c)}),a7(aM,[aY,aT,al],function(b,a,c){return b.Image=a.extend({},c)}),a7(aG,[aT,aZ,a9,bd],function(g,d,j,c){function f(e){var k=this,i=j.capTest,a=j.capTrue;j.call(this,e,h,{access_binary:i(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:i(b.Image&&(c.can("create_canvas")||c.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:i(function(){return"Chrome"===c.browser&&c.version>=28||"IE"===c.browser&&c.version>=10}()),resize_image:function(){return b.Image&&k.can("access_binary")&&c.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(l){return !!~g.inArray(l,["json","text","document",""])},return_status_code:function(l){return !g.arrayDiff(l,[200,404])},select_file:function(){return c.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return k.can("select_file")},summon_file_dialog:i(function(){return"Firefox"===c.browser&&c.version>=4||"Opera"===c.browser&&c.version>=12||"IE"===c.browser&&c.version>=10||!!~g.inArray(c.browser,["Chrome","Safari"])}()),upload_filesize:a,use_http_method:function(l){return !g.arrayDiff(l,["GET","POST"])}}),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(l){return function(){l.call(k),l=k=null}}(this.destroy)}),g.extend(this.getShim(),b)}var h="html4",b={};return j.addConstructor(h,f),b}),a7(aJ,[aG,aT,bb,ap,a3,bd],function(g,d,j,c,f,h){function b(){function m(){var t=this,e=t.getRuntime(),w,u,v,q,a,s;s=d.guid("uid_"),w=e.getShimContainer(),i&&(v=j.get(i+"_form"),v&&d.extend(v.style,{top:"100%"})),q=document.createElement("form"),q.setAttribute("id",s+"_form"),q.setAttribute("method","post"),q.setAttribute("enctype","multipart/form-data"),q.setAttribute("encoding","multipart/form-data"),d.extend(q.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),a=document.createElement("input"),a.setAttribute("id",s),a.setAttribute("type","file"),a.setAttribute("name","Filedata"),a.setAttribute("accept",k.join(",")),d.extend(a.style,{fontSize:"999px",opacity:0}),q.appendChild(a),w.appendChild(q),d.extend(a.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===h.browser&&h.version<10&&d.extend(a.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),a.onchange=function(){var p;this.value&&(p=this.files?this.files[0]:{name:this.value},l=[p],this.onchange=function(){},m.call(t),t.bind("change",function(){var y=j.get(s),x=j.get(s+"_form"),r;t.files.length&&y&&x&&(r=t.files[0],y.setAttribute("id",r.uid),x.setAttribute("id",r.uid+"_form"),x.setAttribute("target",r.uid+"_iframe")),y=x=null},998),a=q=null,t.trigger("change"))},e.can("summon_file_dialog")&&(u=j.get(n.browse_button),c.removeEvent(u,"click",t.uid),c.addEvent(u,"click",function(p){a&&!a.disabled&&a.click(),p.preventDefault()},t.uid)),i=s,w=v=u=null,t.trigger({type:"ready",async:!0})}var i,l=[],k=[],n;d.extend(this,{init:function(p){var r=this,e=r.getRuntime(),q;n=p,k=p.accept.mimes||f.extList2mimes(p.accept,e.can("filter_by_extension")),q=e.getShimContainer(),function(){var t,s,a;t=j.get(p.browse_button),e.can("summon_file_dialog")&&("static"===j.getStyle(t,"position")&&(t.style.position="relative"),s=parseInt(j.getStyle(t,"z-index"),10)||1,t.style.zIndex=s,q.style.zIndex=s-1),a=e.can("summon_file_dialog")?t:q,c.addEvent(a,"mouseover",function(){r.trigger("mouseenter")},r.uid),c.addEvent(a,"mouseout",function(){r.trigger("mouseleave")},r.uid),c.addEvent(a,"mousedown",function(){r.trigger("mousedown")},r.uid),c.addEvent(j.get(p.container),"mouseup",function(){r.trigger("mouseup")},r.uid),t=null}(),m.call(this),q=null},getFiles:function(){return l},disable:function(p){var a;(a=j.get(i))&&(a.disabled=!!p)},destroy:function(){var p=this.getRuntime(),a=p.getShimContainer();c.removeAllEvents(a,this.uid),c.removeAllEvents(n&&j.get(n.container),this.uid),c.removeAllEvents(n&&j.get(n.browse_button),this.uid),a&&(a.innerHTML=""),i=l=k=n=null}})}return g.FileInput=b}),a7(ak,[aG,am],function(b,a){return b.FileReader=a}),a7(aH,[aG,aT,bb,bf,aZ,ap,aP,ag,aw],function(h,m,f,g,b,d,k,p,l){function j(){function i(A){var x=this,w,z,c,y,v=!1;if(n){if(w=n.id.replace(/_iframe$/,""),z=f.get(w+"_form")){for(c=z.getElementsByTagName("input"),y=c.length;y--;){switch(c[y].getAttribute("type")){case"hidden":c[y].parentNode.removeChild(c[y]);break;case"file":v=!0}}c=[],v||z.parentNode.removeChild(z),z=null}setTimeout(function(){d.removeEvent(n,"load",x.uid),n.parentNode&&n.parentNode.removeChild(n);var e=x.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=n=null,A()},1)}}var q,a,n;m.extend(this,{send:function(z,t){function c(){var v=e.getShimContainer()||document.body,u=document.createElement("div");u.innerHTML='<iframe id="'+s+'_iframe" name="'+s+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',n=u.firstChild,v.appendChild(n),d.addEvent(n,"load",function(){var B;try{B=n.contentWindow.document||n.contentDocument||window.frames[n.id].document,/^4\d{2}\s/.test(B.title)&&B.getElementsByTagName("address").length?q=B.title.replace(/^(\d+).*$/,"$1"):(q=200,a=m.trim(B.body.innerHTML),r.trigger({type:"progress",loaded:a.length,total:a.length}),A&&r.trigger({type:"uploadprogress",loaded:A.size||1025,total:A.size||1025}))}catch(y){if(!g.hasSameOrigin(z.url)){return i.call(r,function(){r.trigger("error")}),void 0}q=404}i.call(r,function(){r.trigger("load")})},r.uid)}var r=this,e=r.getRuntime(),s,x,w,A;if(q=a=null,t instanceof p&&t.hasBlob()){if(A=t.getBlob(),s=A.uid,w=f.get(s),x=f.get(s+"_form"),!x){throw new b.DOMException(b.DOMException.NOT_FOUND_ERR)}}else{s=m.guid("uid_"),x=document.createElement("form"),x.setAttribute("id",s+"_form"),x.setAttribute("method",z.method),x.setAttribute("enctype","multipart/form-data"),x.setAttribute("encoding","multipart/form-data"),x.setAttribute("target",s+"_iframe"),e.getShimContainer().appendChild(x)}t instanceof p&&t.each(function(v,y){if(v instanceof k){w&&w.setAttribute("name",y)}else{var u=document.createElement("input");m.extend(u,{type:"hidden",name:y,value:v}),x.appendChild(u)}}),x.setAttribute("action",z.url),c(),x.submit(),r.trigger("loadstart")},getStatus:function(){return q},getResponse:function(c){if("json"===c&&"string"===m.typeOf(a)){try{return l(a.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(r){return null}}return a},abort:function(){var c=this;n&&n.contentWindow&&(n.contentWindow.stop?n.contentWindow.stop():n.contentWindow.document.execCommand?n.contentWindow.document.execCommand("Stop"):n.src="about:blank"),i.call(this,function(){c.dispatchEvent("abort")})}})}return h.XMLHttpRequest=j}),a7(av,[aG,a6],function(b,a){return b.Image=a}),bg([aT,be,a3,bd,bb,aZ,a8,a2,a9,aS,aP,aB,bh,aj,aR,aQ,bf,aF,ag,ai,an,aw,aC,ap])}(this);(function(){var b={},a=moxie.core.utils.Basic.inArray;return function c(f){var d,e;for(d in f){e=typeof f[d],e==="object"&&!~a(d,["Exceptions","Env","Mime"])?c(f[d]):e==="function"&&(b[d]=f[d])}}(window.moxie),b.Env=window.moxie.core.utils.Env,b.Mime=window.moxie.core.utils.Mime,b.Exceptions=window.moxie.core.Exceptions,window.mOxie=b,window.o||(window.o=b),b})();(function(f,b,h){function c(k){function j(q,n,p){var m={chunks:"slice_blob",resize:"send_binary_string",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",max_file_size:"access_binary",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};m[q]?l[m[q]]=n:p||(l[q]=n)}var i=k.required_features,l={};return typeof i=="string"?g.each(i.split(/\s*,\s*/),function(m){j(m,!0)}):typeof i=="object"?g.each(i,function(n,m){j(m,n)}):i===!0&&(k.multipart||(l.send_binary_string=!0),k.chunk_size>0&&(l.slice_blob=!0),g.each(k,function(n,m){j(m,!!n,!0)})),l}var d=f.setTimeout,a={},g={VERSION:"2.0.0beta",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:b.mimes,ua:b.ua,typeOf:b.typeOf,extend:b.extend,guid:b.guid,each:b.each,getPos:b.getPos,getSize:b.getSize,xmlEncode:function(j){var i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},k=/[<>&\"\']/g;return j?(""+j).replace(k,function(l){return i[l]?"&"+i[l]+";":l}):j},toArray:b.toArray,inArray:b.inArray,addI18n:b.addI18n,translate:b.translate,isEmptyObj:b.isEmptyObj,hasClass:b.hasClass,addClass:b.addClass,removeClass:b.removeClass,getStyle:b.getStyle,addEvent:b.addEvent,removeEvent:b.removeEvent,removeAllEvents:b.removeAllEvents,cleanName:function(j){var i,k;k=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(i=0;i<k.length;i+=2){j=j.replace(k[i],k[i+1])}return j=j.replace(/\s+/g,"_"),j=j.replace(/[^a-z0-9_\-\.]+/gi,""),j},buildUrl:function(j,i){var k="";return g.each(i,function(m,l){k+=(k?"&":"")+encodeURIComponent(l)+"="+encodeURIComponent(m)}),k&&(j+=(j.indexOf("?")>0?"&":"?")+k),j},formatSize:function(i){return i===h||/\D/.test(i)?g.translate("N/A"):i>1099511627776?Math.round(i/1099511627776,1)+" "+g.translate("tb"):i>1073741824?Math.round(i/1073741824,1)+" "+g.translate("gb"):i>1048576?Math.round(i/1048576,1)+" "+g.translate("mb"):i>1024?Math.round(i/1024,1)+" "+g.translate("kb"):i+" "+g.translate("b")},parseSize:b.parseSizeStr,predictRuntime:function(k,i){var l,j;return i&&(k.runtimes=i),l=new g.Uploader(k),j=l.runtime,l.destroy(),j},addFileFilter:function(j,i){a[j]=i}};g.addFileFilter("mime_types",function(){function k(m){var l=[];return g.each(m,function(n){g.each(n.extensions.split(/,/),function(p){/^\s*\*\s*$/.test(p)?l.push("\\.*"):l.push("\\."+p.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+l.join("|")+")$","i")}var j,i;return function(m,e,l){if(!i||m!=j){i=k(m),j=[].slice.call(m)}i.test(e.name)?l(!0):(this.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:e}),l(!1))}}()),g.addFileFilter("max_file_size",function(k,i,l){var j;i.size!==j&&k&&i.size>k?(this.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:i}),l(!1)):l(!0)}),g.addFileFilter("prevent_duplicates",function(k,i,l){if(k){var j=this.files.length;while(j--){if(i.name===this.files[j].name&&i.size===this.files[j].size){this.trigger("Error",{code:g.FILE_DUPLICATE_ERROR,message:g.translate("Duplicate file error."),file:i}),l(!1);return}}}l(!0)}),g.Uploader=function(s){function j(){var m,l=0,p;if(this.state==g.STARTED){for(p=0;p<F.length;p++){!m&&F[p].status==g.QUEUED?(m=F[p],this.trigger("BeforeUpload",m)&&(m.status=g.UPLOADING,this.trigger("UploadFile",m))):l++}l==F.length&&(this.state!==g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",F))}}function q(l){l.percent=l.size>0?Math.ceil(l.loaded/l.size*100):100,z()}function z(){var m,l;x.reset();for(m=0;m<F.length;m++){l=F[m],l.size!==h?(x.size+=l.origSize,x.loaded+=l.loaded*l.origSize/l.size):x.size=h,l.status==g.DONE?x.uploaded++:l.status==g.FAILED?x.failed++:x.queued++}x.size===h?x.percent=F.length>0?Math.ceil(x.uploaded/F.length*100):0:(x.bytesPerSec=Math.ceil(x.loaded/((+(new Date)-k||1)/1000)),x.percent=x.size>0?Math.ceil(x.loaded/x.size*100):0)}function A(){var m=this,l=0,e={accept:s.filters.mime_types,runtime_order:s.runtimes,required_caps:r,swf_url:s.flash_swf_url,xap_url:s.silverlight_xap_url};g.each(s.runtimes.split(/\s*,\s*/),function(p){s[p]&&(e[p]=s[p])}),b.inSeries([function(p){s.browse_button?(i=new b.FileInput(g.extend({},e,{name:s.file_data_name,multiple:s.multi_selection,container:s.container,browse_button:s.browse_button})),i.onready=function(){var u=b.Runtime.getInfo(this.ruid);b.extend(m.features,{chunks:u.can("slice_blob"),multipart:u.can("send_multipart"),multi_selection:u.can("select_multiple")}),l++,p()},i.onchange=function(){m.addFile(this.files)},i.bind("mouseenter mouseleave mousedown mouseup",function(v){if(!n){var u=b.get(s.browse_button);u&&(s.browse_button_hover&&("mouseenter"===v.type?b.addClass(u,s.browse_button_hover):"mouseleave"===v.type&&b.removeClass(u,s.browse_button_hover)),s.browse_button_active&&("mousedown"===v.type?b.addClass(u,s.browse_button_active):"mouseup"===v.type&&b.removeClass(u,s.browse_button_active)),u=null)}}),i.bind("error runtimeerror",function(){i=null,p()}),i.init()):p()},function(p){s.drop_element?(t=new b.FileDrop(g.extend({},e,{drop_zone:s.drop_element})),t.onready=function(){var u=b.Runtime.getInfo(this.ruid);m.features.dragdrop=u.can("drag_and_drop"),l++,p()},t.ondrop=function(){m.addFile(this.files)},t.bind("error runtimeerror",function(){t=null,p()}),t.init()):p()}],function(){typeof s.init=="function"?s.init(m):g.each(s.init,function(u,p){m.bind(p,u)}),l?m.trigger("PostInit"):m.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})})}function C(m,p){if(m.ruid){var l=b.Runtime.getInfo(m.ruid);if(l){return l.can(p)}}return !1}function G(u,v,p){var l=new b.Image;try{l.onload=function(){l.downsize(v.width,v.height,v.crop,v.preserve_headers)},l.onresize=function(){p(this.getAsBlob(u.type,v.quality)),this.destroy()},l.onerror=function(){p(u)},l.load(u)}catch(m){p(u)}}var F=[],B={},r={},k,x,n=!1,i,t,D;x=new g.QueueProgress,s=g.extend({runtimes:b.Runtime.order,max_retries:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",send_chunk_number:!0},s),s.resize&&(s.resize=g.extend({preserve_headers:!0,crop:!1},s.resize)),g.typeOf(s.filters)==="array"&&(s.filters={mime_types:s.filters}),s.filters=g.extend({mime_types:[],prevent_duplicates:!!s.prevent_duplicates,max_file_size:s.max_file_size},s.filters),s.filters.max_file_size=g.parseSize(s.filters.max_file_size)||0,s.chunk_size=g.parseSize(s.chunk_size)||0,s.required_features=r=c(g.extend({},s)),g.extend(this,{id:g.guid(),state:g.STOPPED,features:{},runtime:b.Runtime.thatCan(r,s.runtimes),files:F,settings:s,total:x,init:function(){var e=this;s.browse_button=b.get(s.browse_button),s.drop_element=b.get(s.drop_element),typeof s.preinit=="function"?s.preinit(e):g.each(s.preinit,function(m,l){e.bind(l,m)});if(!s.browse_button||!s.url){this.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")});return}e.bind("FilesAdded",function(m,l){[].push.apply(F,l),d(function(){e.trigger("QueueChanged"),e.refresh()},1)}),e.bind("CancelUpload",function(){D&&D.abort()}),s.unique_names&&e.bind("BeforeUpload",function(p,l){var u=l.name.match(/\.([^.]+)$/),m="part";u&&(m=u[1]),l.target_name=l.id+"."+m}),e.bind("UploadFile",function(v,y){function m(){w-->0?d(H,1):(y.loaded=E,v.trigger("Error",{code:g.HTTP_ERROR,message:g.translate("HTTP Error."),file:y,response:D.responseText,status:D.status,responseHeaders:D.getAllResponseHeaders()}))}function H(){var u,p,M,N;if(y.status==g.DONE||y.status==g.FAILED||v.state==g.STOPPED){return}M={name:y.target_name||y.name},J&&K.chunks&&I.size>J?(N=Math.min(J,I.size-E),u=I.slice(E,E+N)):(N=I.size,u=I),J&&K.chunks&&(s.send_chunk_number?(M.chunk=Math.ceil(E/J),M.chunks=Math.ceil(I.size/J)):(M.offset=E,M.total=I.size)),D=new b.XMLHttpRequest,D.upload&&(D.upload.onprogress=function(l){y.loaded=Math.min(y.size,E+l.loaded),v.trigger("UploadProgress",y)}),D.onload=function(){if(D.status>=400){m();return}N<I.size?(u.destroy(),E+=N,y.loaded=Math.min(E,I.size),v.trigger("ChunkUploaded",y,{offset:y.loaded,total:I.size,response:D.responseText,status:D.status,responseHeaders:D.getAllResponseHeaders()}),b.Env.browser==="Android Browser"&&v.trigger("UploadProgress",y)):y.loaded=y.size,u=p=null,!E||E>=I.size?(y.size!=y.origSize&&(I.destroy(),I=null),v.trigger("UploadProgress",y),y.status=g.DONE,v.trigger("FileUploaded",y,{response:D.responseText,status:D.status,responseHeaders:D.getAllResponseHeaders()})):d(H,1)},D.onerror=function(){m()},D.onloadend=function(){this.destroy(),D=null},v.settings.multipart&&K.multipart?(M.name=y.target_name||y.name,D.open("post",L,!0),g.each(v.settings.headers,function(O,l){D.setRequestHeader(l,O)}),p=new b.FormData,g.each(g.extend(M,v.settings.multipart_params),function(O,l){p.append(l,O)}),p.append(v.settings.file_data_name,u),D.send(p,{runtime_order:v.settings.runtimes,required_caps:r,swf_url:v.settings.flash_swf_url,xap_url:v.settings.silverlight_xap_url})):(L=g.buildUrl(v.settings.url,g.extend(M,v.settings.multipart_params)),D.open("post",L,!0),D.setRequestHeader("Content-Type","application/octet-stream"),g.each(v.settings.headers,function(O,l){D.setRequestHeader(l,O)}),D.send(u,{runtime_order:v.settings.runtimes,required_caps:r,swf_url:v.settings.flash_swf_url,xap_url:v.settings.silverlight_xap_url}))}var L=v.settings.url,K=v.features,J=s.chunk_size,w=s.max_retries,I,E=0;y.loaded&&(E=y.loaded=J*Math.floor(y.loaded/J)),I=y.getSource(),!b.isEmptyObj(v.settings.resize)&&C(I,"send_binary_string")&&!!~b.inArray(I.type,["image/jpeg","image/png"])?G.call(this,I,v.settings.resize,function(l){I=l,y.size=l.size,H()}):H()}),e.bind("UploadProgress",function(m,l){q(l)}),e.bind("StateChanged",function(m){if(m.state==g.STARTED){k=+(new Date)}else{if(m.state==g.STOPPED){for(var l=m.files.length-1;l>=0;l--){m.files[l].status==g.UPLOADING&&(m.files[l].status=g.QUEUED,z())}}}}),e.bind("QueueChanged",z),e.bind("Error",function(m,l){l.file&&(l.file.status=g.FAILED,q(l.file),m.state==g.STARTED&&d(function(){j.call(e)},1))}),e.bind("FileUploaded",function(){z(),d(function(){j.call(e)},1)}),e.trigger("Init",{runtime:this.runtime}),A.call(this)},refresh:function(){i&&i.trigger("Refresh"),this.trigger("Refresh")},start:function(){this.state!=g.STARTED&&(this.state=g.STARTED,this.trigger("StateChanged"),j.call(this))},stop:function(){this.state!=g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){n=arguments[0]!==h?arguments[0]:!0,i&&i.disable(n),this.trigger("DisableBrowse",n)},getFile:function(m){var l;for(l=F.length-1;l>=0;l--){if(F[l].id===m){return F[l]}}},addFile:function(y,p){function w(){var l=t||i;return l?l.getRuntime().uid:!1}function v(u,K){var l=[];b.each(m.settings.filters,function(e,L){a[L]&&l.push(function(M){a[L].call(m,e,u,function(N){M(!N)})})}),b.inSeries(l,K)}function E(u){var l=b.typeOf(u);if(u instanceof b.File){if(!u.ruid&&!u.isDetached()){if(!H){return !1}u.ruid=H,u.connectRuntime(H)}E(new g.File(u))}else{u instanceof b.Blob?(E(u.getSource()),u.destroy()):u instanceof g.File?(p&&(u.name=p),J.push(function(e){v(u,function(K){K||I.push(u),e()})})):b.inArray(l,["file","blob"])!==-1?E(new b.File(null,u)):l==="node"&&b.typeOf(u.files)==="filelist"?b.each(u.files,E):l==="array"&&(p=null,b.each(u,E))}}var m=this,J=[],I=[],H;H=w(),E(y),J.length&&b.inSeries(J,function(){I.length&&m.trigger("FilesAdded",I)})},removeFile:function(m){var l=typeof m=="string"?m:m.id;for(var p=F.length-1;p>=0;p--){if(F[p].id===l){return this.splice(p,1)[0]}}},splice:function(p,l){var m=F.splice(p===h?0:p,l===h?F.length:l);return this.trigger("FilesRemoved",m),this.trigger("QueueChanged"),g.each(m,function(u){u.destroy()}),m},trigger:function(p){var l=B[p.toLowerCase()],u,m;if(l){m=Array.prototype.slice.call(arguments),m[0]=this;for(u=0;u<l.length;u++){if(l[u].func.apply(l[u].scope,m)===!1){return !1}}}return !0},hasEventListener:function(l){return !!B[l.toLowerCase()]},bind:function(p,l,u){var m;p=p.toLowerCase(),m=B[p]||[],m.push({func:l,scope:u||this}),B[p]=m},unbind:function(u){u=u.toLowerCase();var m=B[u],p,l=arguments[1];if(m){if(l!==h){for(p=m.length-1;p>=0;p--){if(m[p].func===l){m.splice(p,1);break}}}else{m=[]}m.length||delete B[u]}},unbindAll:function(){var l=this;g.each(B,function(e,m){l.unbind(m)})},destroy:function(){this.stop(),g.each(F,function(l){l.destroy()}),F=[],i&&(i.destroy(),i=null),t&&(t.destroy(),t=null),r={},k=x=n=D=null,this.trigger("Destroy"),this.unbindAll(),B={}}})},g.File=function(){function j(e){g.extend(this,{id:g.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:g.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var k=this.getSource().getSource();return b.inArray(b.typeOf(k),["blob","file"])!==-1?k:null},getSource:function(){return i[this.id]?i[this.id]:null},destroy:function(){var k=this.getSource();k&&(k.destroy(),delete i[this.id])}}),i[this.id]=e}var i={};return j}(),g.QueueProgress=function(){var i=this;i.size=0,i.loaded=0,i.uploaded=0,i.failed=0,i.queued=0,i.percent=0,i.bytesPerSec=0,i.reset=function(){i.size=i.loaded=i.uploaded=i.failed=i.queued=i.percent=i.bytesPerSec=0}},f.plupload=g})(window,mOxie);window.Env.middleNavHide=true;$(document).ready(function(){if($("#J-isNeedBind").val()==1){mConfirm("请先绑定邮箱和手机号",function(){window.location.href="https://passport.mafengwo.cn/setting/security/"},"");$("#popup_close").hide();$("#popup_close").click(function(){window.location.href="https://passport.mafengwo.cn/setting/security/"});return false}var aj="1";var s="2";var X="3";var ag="4";var W="5";var F="1";var w="3";var ab="6";var h="12";var e="20";var l="28";var T="29";var D="30";var Z="31";var m="32";var b="33";var B="34";var p=[l];var O=[ab,h,e,l,T,D,Z,m,b];var ai={mainland:0,other:1,gangao:2,taiwan:3};var G=$("#registered_land").length!=0?$("#registered_land").val():$('.registered_land input[type="radio"]:checked').val();var u=$('.dl_register_land input[type="radio"]:checked').val();var j=[aj,X,ag];var am=["J-mainland-feature","J-other-feature","J-taiwan-feature","J-gangao-feature"];var L=["J-dl-mainland-feature","J-dl-other-feature","J-dl-taiwan-feature","J-dl-gangao-feature"];R($("#dgyh_bank_province").find("option:selected").val());S(G);Y(G);t();A();J();N(G);af();C();k();function N(i){if(i==ai.mainland){g($("#province_list").find("option:selected").data("province"),false);y();d()}else{if(i==ai.other){ao();d();$(".J-banziyou").addClass("hide")}else{if(i==ai.gangao){a();d();$(".J-banziyou").addClass("hide")}else{if(i==ai.taiwan){V();d();$(".J-banziyou").addClass("hide")}else{g($("#province_list").find("option:selected").data("province"),false);y();d()}}}}}$('.registered_land input[type="radio"]').click(function(){var i=$(this).val();G=i;N(i);S(i);af();t();A();J();C()});$("#province_list").change(function(){g($(this).find("option:selected").data("province"),true)});$("#dgyh_bank_province").change(function(){R($(this).find("option:selected").val());$(".esign_split_city").val("")});$(".J-is-very-long").change(function(){if($(this).is(":checked")){$(this).parent("label").siblings("input.J-expireday-end").val("2099-12-31")}});$("input.J-expireday-end").change(function(){if($(this).val()!="2099-12-31"){$(this).next().find("input.J-is-very-long").attr("checked",false)}else{$(this).next().find("input.J-is-very-long").attr("checked",true)}});$("#lvbx_expireday_start,#zrbx_expireday_start,#lvbx_expireday_start,#dl_zrbx_expireday_start").on("change",function(){var ap=$(this).val();if(ap!=""){var at=new Date(ap);var ar=new Date(at);ar.setFullYear(ar.getFullYear()+1);ar.setDate(ar.getDate()-1);var au=(ar.getMonth()+1)>=10?(ar.getMonth()+1):("0"+(ar.getMonth()+1));var i=ar.getDate()>=10?ar.getDate():("0"+ar.getDate());var aq=ar.getFullYear()+"-"+au+"-"+i;$(this).next("input").val(aq)}});function ak(aq){for(var ap in am){if(aq!=am[ap]){$("."+am[ap]).addClass("hide");$("option."+am[ap]).removeAttr("selected")}}$("."+aq).removeClass("hide")}function g(ap,i){$("#city_list").find("option").each(function(aq,ar){if($(this).data("belong")==ap){if(i){$(this).prop("selected",true);i=false}$(this).filter("span > option").unwrap()}else{$(this).prop("selected",false);$(this).filter(":not(span > option)").wrap("<span>").parent().hide()}})}function t(){$(".J-feature-select").find("option").each(function(){if(G==ai.mainland&&$(this).hasClass("mainland-option")){$(this).filter("span > option").unwrap()}else{if(G==ai.taiwan&&$(this).hasClass("taiwan-option")){$(this).filter("span > option").unwrap()}else{$(this).filter(":not(span > option)").wrap("<span>").parent().hide()}}})}function J(){if(G==ai.mainland){if($("#operTelAreaNO").val()==""){$("#operTelAreaNO").val("0086")}if($("#agentTelAreaNO").val()==""){$("#agentTelAreaNO").val("0086")}}}function R(i){$(".esign_split_city").each(function(aq,ar){var ap=false;$(ar).find("option").each(function(at,au){if($(au).data("parent")==i){$(ar).show();ap=true;$(au).filter("span > option").unwrap()}else{$(au).filter(":not(span > option)").wrap("<span>").parent().hide()}});if(!ap){$(ar).hide()}});$("#dgyh_bank_city").find("option").each(function(){if($(this).data("parent-city")==i){$(this).filter("span > option").unwrap()}else{$(this).filter(":not(span > option)").wrap("<span>").parent().hide()}})}function Y(i){if(i==ai.mainland){$("input[name='fr_cret_type']").each(function(ap,aq){if($(this).val()==0){$(this).prop("checked",true)}else{$(this).attr("disabled","disabled").parent("label").addClass("hide")}})}else{$("input[name='fr_cret_type']").each(function(ap,aq){if($(this).val()==0){$(this).prop("checked",true)}else{$(this).removeAttr("disbaled").parent("label").removeClass("hide")}})}}function S(i){if(i!=ai.mainland){$("#type-table").find("tbody tr").each(function(aq,ar){var ap=$(ar).data("type");if(j.indexOf(ap+"")!=-1){$(ar).hide();$(ar).find("input[name='sales_type']").each(function(at,au){$(au).prop("checked",false)})}});$("#type-table").find("input[name=sales_type]").each(function(ap,aq){if(p.indexOf($(aq).val()+"")!=-1){$(aq).prop("disabled",true);$(aq).prop("checked",false);$(aq).next("span").css({color:"lightgrey"})}})}else{$(".sales-table").find("tbody tr").each(function(ap,aq){$(aq).show()});$("#type-table").find("input[name=sales_type]").each(function(ap,aq){if(p.indexOf($(aq).val()+"")!=-1){$(aq).prop("disabled",false);$(aq).next("span").css({color:"#666"})}})}}function y(){var i="J-mainland-feature";ak(i);q();$(".djyz").addClass("hide")}function ao(){var i="J-other-feature";ak(i);$(".tourism-qualify").addClass("hide");q();E()}function a(){var i="J-gangao-feature";ak(i);$(".tourism-qualify").addClass("hide");q();E()}function q(){$(".J-feature-select option").each(function(){$(this).removeAttr("selected")});var i=false;var ap=$("#J-company-feature-id").val();if(ap<5){$(".J-feature-select option").each(function(){if($(this).val()==ap&&!$(this).hasClass("hide")){$(this).attr("selected","selected");i=true;return false}})}if(!i){$(".J-feature-select option").each(function(){if($(this).val()==1){$(this).attr("selected","selected");return false}})}}function E(){$('.tourism-qualify input[type="radio"]').each(function(){if($(this).val()==0){$(this).attr("checked","checked");return false}})}function V(){var i="J-taiwan-feature";ak(i);$(".J-feature-select option").each(function(){$(this).removeAttr("selected")});var ap=$("#J-company-feature-id").val();if(ap==5||ap==6){$(".J-feature-select option").each(function(){if($(this).val()==ap&&!$(this).hasClass("hide")){$(this).attr("selected","selected");return false}})}else{$(".J-feature-select option").each(function(){if($(this).val()==5){$(this).attr("selected","selected");return false}})}}function d(){if($('.company_feature input[type="radio"]:checked').val()==4){ac()}else{K()}}function af(){var i=$("#J-company-feature-id").val();if(i==4){$(".J-feature-select").addClass("hide");$(".J-not-travel-agency input").attr("checked","checked")}else{if(i!=4){$(".J-feature-select").removeClass("hide");$(".J-travel-agency input").attr("checked","checked");if(G==ai.other||G==ai.gangao){$(".J-feature-select").addClass("hide")}else{$(".J-feature-select").removeClass("hide");$(".J-feature-select option").each(function(){if($(this).val()==i&&!$(this).hasClass("hide")){$(this).attr("selected","selected")}})}}}d()}$('.company_feature input[type="radio"]').click(function(){d();if($(this).parent().hasClass("J-travel-agency")){if(G==0||G==3){$(".J-feature-select").removeClass("hide")}}else{$(".J-feature-select").addClass("hide")}A()});$(".sales-type").delegate('input[type="checkbox"]',"click",function(){C();A()});function A(){var ap=$('.company_feature input[type="radio"]:checked').val()==4;var i=false;$(".sales-type input[type='checkbox']:checked").each(function(){if([F,w,B].indexOf($(this).val()+"")!=-1){i=true}});if(i&&ap&&G==ai.mainland){$(".J-flight").removeClass("hide")}else{$(".J-flight").addClass("hide")}}Y(G);$("#show-tip").on("mouseover",function(){$(this).find(".tool-tip-show").show()});$("#show-tip").on("mouseout",function(){$(this).find(".tool-tip-show").hide()});function C(){$(".sales-table input").each(function(){if($(this).val()==6){if($(this).attr("checked")=="checked"){$(".J-banziyou").removeClass("hide")}else{$(".J-banziyou").addClass("hide")}}if($(this).val()==28){if($(this).attr("checked")=="checked"){$(".J-zyxdz").removeClass("hide")}else{$(".J-zyxdz").addClass("hide")}}})}function z(i){u=i;c(i);al();if(i==ai.mainland){n();H(u,1);if($('.dl_is_three_in_one input[type="radio"]:checked').val()==0){P(true)}}else{if(i==ai.other){x();H(u,4);P(false)}else{if(i==ai.gangao){ae();H(u,4);P(false)}else{if(i==ai.taiwan){aa();H(u,5);P(false)}}}}}function c(i){$(".J-dl-feature-select").find("option").each(function(){if(i==ai.mainland&&$(this).hasClass("mainland-option")){$(this).filter("span > option").unwrap()}else{if(i==ai.taiwan&&$(this).hasClass("taiwan-option")){$(this).filter("span > option").unwrap()}else{$(this).filter(":not(span > option)").wrap("<span>").parent().hide()}}})}$(".J-dl-feature-select select").on("change",function(){var i=0;$(".J-dl-feature-select select").find("option:selected").each(function(){var ap=$(this);if($(this).parent("span").length==0){i=ap.val()}});H(u,i)});c(u);function n(){var i="J-dl-mainland-feature";Q(i);I()}function x(){var i="J-dl-other-feature";Q(i);I()}function ae(){var i="J-dl-gangao-feature";Q(i);I()}function aa(){var i="J-dl-taiwan-feature";Q(i);var ap=$("#J-dl-company-feature-id").val();if(ap==5||ap==6){$(".J-dl-feature-select option").each(function(){if($(this).val()==ap){$(this).attr("selected","selected");return false}})}else{$(".J-dl-feature-select option").each(function(){if($(this).val()==5){$(this).attr("selected","selected");return false}})}}function Q(aq){for(var ap in L){if(aq!=L[ap]){$("."+L[ap]).addClass("hide")}}$("."+aq).removeClass("hide")}$('.dl_register_land input[type="radio"]').click(function(){var i=$(this).val();z(i)});function I(){var i=$("#J-dl-company-feature-id").val();if(i){$(".J-dl-feature-select option").each(function(){if($(this).val()==i){$(this).attr("selected","selected");return false}})}else{$(".J-dl-feature-select option").each(function(){if($(this).val()==1){$(this).attr("selected","selected");return false}})}}function al(){var i=$("#J-dl-company-feature-id").val();if(i==4){$(".J-dl-feature-select").addClass("hide");$(".J-dl-not-travel-agency input").attr("checked","checked")}else{$(".J-dl-travel-agency input").attr("checked","checked");$(".J-dl-feature-select").removeClass("hide");if(u==ai.gangao||u==ai.other){$(".J-dl-feature-select").addClass("hide")}$(".J-dl-feature-select option").each(function(){if($(this).val()==i&&!$(this).hasClass("hide")){$(this).attr("selected","selected")}})}}al();$('.dl_company_feature input[type="radio"]').click(function(){if($(this).parent().hasClass("J-dl-travel-agency")){if(u==ai.mainland){$(".J-dl-feature-select").removeClass("hide");H(u,1)}else{if(u==ai.taiwan){$(".J-dl-feature-select").removeClass("hide");H(u,5)}}}else{$(".J-dl-feature-select").addClass("hide");H(u,4)}});z(u);function ac(){$(".sales-table input").each(function(){var aq=$(this).val();for(var ap in O){if(aq==O[ap]){$(this).prop("disabled",true);$(this).prop("checked",false);$(this).next("span").css({color:"lightgrey"})}}})}function K(){$(".sales-table input").each(function(){var aq=$(this).val();for(var ap in O){if(aq==O[ap]){if(p.indexOf(aq+"")!=-1&&G!=ai.mainland){continue}$(this).prop("disabled",false);$(this).next("span").css({color:"#666"})}}})}function H(ap,i){$(".company_feature_1_feature,.company_feature_2_feature, .company_feature_3_feature, .company_feature_5_feature,.company_feature_7_feature").each(function(){$(this).addClass("hide")});if(ap==ai.mainland&&$.inArray(parseInt(i),[1,2,3])>-1){$(".company_feature_"+i+"_feature").each(function(){$(this).removeClass("hide")})}if(ap==ai.taiwan&&$.inArray(parseInt(i),[5,7])>-1){$(".company_feature_"+i+"_feature").each(function(){$(this).removeClass("hide")})}}var M=$("#J-dl-company-feature-id").val();if(M<=0){if($(".J-dl-travel-agency input").attr("checked")=="checked"){if(u==1||u==2){M==1}else{M=$(".J-dl-feature-select select").val()}}else{if($(".J-dl-not-travel-agency input").attr("checked")=="checked"){M=$('input[name="dl_company_feature"]:checked').val()}}}H(u,M);var r=[{name:"djyz",value:"djfy"},{name:"dlyz",value:"dlfy"},{name:"swyz",value:"swfy"},{name:"dl_swyz",value:"dl_swfy"},{name:"hyyz",value:"hyfy"},{name:"dl_hyyz",value:"dl_hyfy"},{name:"bxyz",value:"bxfy"},{name:"dl_bxyz",value:"dl_bxfy"}];for(var ah=0;ah<r.length;ah++){(function(){var i="."+r[ah]["name"];var ap="."+r[ah]["value"];$(i+' input[type="radio"]').click(function(){if($(this).attr("checked")=="checked"&&$(this).val()==2){$(ap).removeClass("hide")}else{$(ap).addClass("hide")}});if($(i+' input[type="radio"]:checked').val()==2){$(ap).removeClass("hide")}else{$(ap).addClass("hide")}$(i+' input[type="radio"]').click(function(){if($(this).attr("checked")=="checked"&&$(this).val()==2){$(ap).removeClass("hide")}else{$(ap).addClass("hide")}});if($(i+' input[type="radio"]:checked').val()==2){$(ap).removeClass("hide")}else{$(ap).addClass("hide")}})(ah)}if($('.is_three_in_one input[type="radio"]:checked').val()==1){$(".three_in_on_item").each(function(){$(this).addClass("hide")})}$('.is_three_in_one input[type="radio"]').click(function(){if(($(this).attr("checked")=="checked")&&$(this).val()==1){$(".three_in_on_item").each(function(){$(this).addClass("hide")})}else{$(".three_in_on_item").each(function(){$(this).removeClass("hide")})}});if($('.dl_is_three_in_one input[type="radio"]:checked').val()==1||u!=ai.mainland){P(false)}function P(i){if(i){$(".dl_three_in_on_item").each(function(){$(this).removeClass("hide")})}else{$(".dl_three_in_on_item").each(function(){$(this).addClass("hide")})}}$('.dl_is_three_in_one input[type="radio"]').click(function(){if(($(this).attr("checked")=="checked")&&$(this).val()==1){P(false)}else{$(".dl_three_in_on_item").each(function(){P(true)})}});$('[data-type="date"]').datetimepicker({timepicker:false,lang:"zh",format:"Y-m-d",formatDate:"Y-m-d",todayButton:false,scrollMonth:false,scrollInput:false,showApplyButton:false,initTime:false,defaultSelect:false,theme:"mfw",yearStart:1900,yearEnd:3000});$("#nextstep1").click(function(){checkField();return false});$("#nextstep2").click(function(){checkField2();return false});$("#saverecord").click(function(){saveRecord();return false});var v="jpg,jpeg,JPG,JPEG,gif,GIF,png,PNG";var an="jpg,jpeg,JPG,JPEG,gif,GIF,png,PNG,docx,DOCX,doc,DOC,pdf,PDF";var U="/interface/Iupload.php";var ad="/interface/IuploadFile.php";$(".upload .item").each(function(){var ap=$(this).attr("data-type");var aq=$(this).attr("file-type");var au=v;var aw=U;if("file"==aq){au=an;aw=ad}if($(this).attr("data-multi")=="true"){var av=$(this).attr("data-total")-0;var at="";var ar=0;if(av==0){at=ap+"_"+ar;newUpload(at,aw,au)}else{while(ar<=av){at=ap+"_"+ar;newUpload(at,aw,au);ar++}}}else{newUpload(ap,aw,au)}});function f(ar,aq,ap){var ap=ap+"_"+aq;var at='<div class="J-new-upload"><span class="s-upload"><a  href="#" id="pickfiles-'+ap+'">上传文件</a>&nbsp;清晰彩色扫描件(不超过5M)</span><a id="uploadfiles-'+ap+'" href="javascript:;" style="display:none">开始上传</a><span class="preview" id="preview-'+ap+'" style="margin-left: 3px;"> </span><a href="javascript:;" class="J-del" style="margin-left: 10px;">删除</a><input type="hidden" name="'+ap+'" id="'+ap+'" value=""></div>';var i=ar.html();ar.html(i+at);newUpload(ap,"/interface/Iupload.php","jpg,jpeg,JPG,JPEG,gif,GIF,png,PNG")}$(".upload .item").delegate(".J-add-new","click",function(aq){var at=$(this).parent(".item");var ar=at.find(".J-upload-other");var ap=at.attr("data-total")-0;var i=at.attr("data-type");if(ap<=0){ap=1}ap=ap+1;at.attr("data-total",ap);f(ar,ap-1,i);return false});$(".upload .item").delegate(".J-del","click",function(){var ap=$(this).parents(".item");var i=ap.attr("data-total");$(this).parent(".J-new-upload").remove();if(i>0){i=i-1;ap.attr("data-total",i)}});$("input[name='have_corporate_account']").on("change",function(){if($("input[name='have_corporate_account']:checked").length==0){$(".have_corporate_account_item").removeClass("hide")}else{$(".have_corporate_account_item").addClass("hide")}});$("input[name='dgyh_type']").on("change",function(){k()});function k(){var i=$("input[name='dgyh_type']:checked").val();if(i==0){$(".dgyh-basic-feature").removeClass("hide");$(".dgyh-common-feature").addClass("hide")}else{$(".dgyh-basic-feature").addClass("hide");$(".dgyh-common-feature").removeClass("hide")}}});function checkField(){var v=[];$('input[name="sales_type"]:checked').each(function(){v.push($(this).val())});if(!v.length){mAlert("请选择 必填信息:经营品类");return false}v=JSON.stringify(v);var a=$('input[name="registered_land"]:checked').val();var x="";var g=false;switch(a){case"0":var l="";$("#city_list").find("option:selected").each(function(){if($(this).parent("span").length==0){l=$(this).val()}});if(l==""){g=true}x=$("select[name='province_name']").find("option:selected").val()+"--"+l;break;case"1":var c=$("select[name='country_name']").find("option:selected").val();if(c==""){g=true}x=c;break;case"2":var u=$("select[name='special_region']").find("option:selected").val();if(!/^(香港|澳门)$/.test(u)){g=true}x=u;break;case"3":x=$("select[name='special_province']").find("option:selected").val();break;default:break}if(g||x==""){mAlert("请选择 必填信息：公司注册国家/省市");return false}var b=["name","short_name","city","address","agentTelAreaNO","tel","agentFaxAreaNO","fax","uname","oper_tel","email","qq","company_desc"];var k=["公司全称","您的马蜂窝店铺名称","公司注册国家/省市","公司经营地址","公司电话区号","公司电话","公司传真区号","公司传真号","申请人姓名","申请人电话","申请人邮箱","申请人QQ号码","公司主营业务介绍"];var d=["agentFaxAreaNO","fax"];var s=[];for(var j in b){if(b[j]=="city"){if(x==""){mAlert("请填写 必填信息:"+k[j]);return false}s.push({name:b[j],value:x});continue}if($("#"+b[j]).val()==""&&d.indexOf(b[j])==-1){mAlert("请填写 必填信息:"+k[j]);return false}else{var n=$("#"+b[j]).val();if(b[j]=="short_name"){var A=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]");if(A.test(n)){mAlert("【店铺名称】不合规范");return false}else{if(n.indexOf(" ")>0){mAlert("【店铺名称】不合规范");return false}else{if(n.match(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g)!=null){mAlert("【店铺名称】不合规范");return false}else{var h=/[a-z0-9\d]/i,q=/[\u4e00-\u9fa5]/,p=0,w;for(var y=0;y<n.length;y++){w=n.charAt(y);if(h.test(w)){p++}else{if(q.test(w)){p+=2}}}if(p>12){mAlert("【店铺名称】不合规范");return false}}}}}s.push({name:b[j],value:$("#"+b[j]).val()})}}var m=$("input[name='operTelAreaNO']").val();var f=$("input[name='operTel']").val();if(m==""||f==""){mAlert("请填写 必填信息：店铺负责人的联系手机号码");return false}else{var z=m+"--"+f;s.push({name:"oper_tel",value:z})}var e=null;if($(".J-travel-agency input").attr("checked")=="checked"){if(a==1||a==2){e=1}else{e=$(".J-feature-select select").val()}s.push({name:"company_feature_id",value:e})}else{if($(".J-not-travel-agency input").attr("checked")=="checked"){e=$('input[name="company_feature"]:checked').val();s.push({name:"company_feature_id",value:e})}else{mAlert("请选择 公司性质");return false}}if(a==2){if(!/^(香港|澳门)$/.test(x)){mAlert("公司注册国家省市,请填写香港或澳门");return false}}else{if(a==3){if(!/^(台湾)$/.test(x)){mAlert("公司注册国家省市,请填写台湾");return false}}}if($("#agree").attr("checked")!="checked"){mAlert("请仔细阅读“马蜂窝平台合作协议”的内容后勾选确认。");return false}if($("input[name='product_mdd_type']:checked").length==""||$("#product_mdd_detail").val()==""){mAlert("请完善您的主营旅游产品目的地");return false}var r=new Array();$("input[name='high_risk']:checked").each(function(i,B){r.push($(B).val())});var t=0;$("input[name='product_mdd_type']:checked").each(function(){if($(this).val()==1){t+=1}if($(this).val()==2){t+=2}});s.push({name:"product_mdd_type",value:t});s.push({name:"high_risk",value:r});s.push({name:"product_mdd_detail",value:$("#product_mdd_detail").val()});s.push({name:"is_agree",value:1});s.push({name:"have_corporate_account",value:$("#have_corporate_account").val()});s.push({name:"type_ids",value:v});s.push({name:"registered_land",value:a});s.push({name:"translate_name",value:$("#translate_name").val()});s.push({name:"act",value:"step1record"});$.post("/sales/ajax_alliance.php",s,function(i){if(i.errno==0){location.href="/sales/alliance.php?step=2"}else{mAlert(i.error)}})}function validatePage2(H){var z=[];var b=["yyzh_desc","company_birthday","yyzh_expireday_start","yyzh_expireday_end","registered_capital","company_url","frsf_name","frsf_number","frsf_expireday_start","frsf_expireday_end","fzr_name","fzr_number","fzr_expireday_start","fzr_expireday_end"];var n=["公司经营范围","公司成立日期","","","公司注册资本","请提供您公司注册所在地区的企业信息公示平台链接","法人姓名","法人身份证件号码","法人身份证件有效期","法人身份证件有效期","店铺负责人姓名","店铺负责人身份证件号码","店铺负责人身份证件有效期","店铺负责人身份证件有效期"];var a=$("#registered_land").val();var h=$("#company_feature_id").val();var d=$('.dl_register_land input[type="radio"]:checked').val();for(var j in b){if(a==0){if(b[j]=="yyzh_expireday_start"||b[j]=="yyzh_expireday_end"){if($("#"+b[j]).val()==""){if(H){mAlert("请填写 必填信息:公司营业执照有效期");return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()});continue}}if(b[j]=="company_birthday"){continue}}else{if(a==1||a==2||a==3){if(b[j]=="yyzh_expireday_start"||b[j]=="yyzh_expireday_end"){if($("#"+b[j]).val()==""&&a!=3){if(H){mAlert("请填写 必填信息:公司登记注册文件的有效期");return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()});continue}}if(b[j]=="company_url"){if($("#"+b[j]).val()==""){if(H){mAlert("请填写 必填信息:"+n[j]);return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()});continue}}}}if($("#"+b[j]).val()==""){if(b[j]=="frsf_number"||b[j]=="fzr_number"){if(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test($("#"+b[j]).val())===false){if(H){mAlert("请填写 正确信息:"+n[j]);return false}}}if(H){mAlert("请填写 必填信息:"+n[j]);return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()})}}z.push({name:"fr_cret_type",value:$("input[name='fr_cret_type']:checked").val()});z.push({name:"fzr_cret_type",value:$("input[name='fzr_cret_type']:checked").val()});if($('.is_three_in_one input[type="radio"]:checked').length==0&&a==0){if(H){mAlert("请选择 必填信息: 是否三证合一");return false}}var f=$('.is_three_in_one input[type="radio"]:checked').val();if(a==0){var k="";k=$("input[name='have_corporate_account']:checked").length>0?0:1;var D=$("input[name='dgyh_type']:checked").val();z.push({name:"have_corporate_account",value:k});z.push({name:"dgyh_type",value:D});var b=["company_codeusc","dgyh_account","dgyh_bank_name","dgyh_bank_province","dgyh_bank_city"];var n=["统一社会信用代码/注册号","银行卡号","开户行名称","开户所在省","开户所在城市"];if(k==0){b=["company_codeusc"];n=["统一社会信用代码/注册号"]}else{if(D==0){b.push("dgyh_subbank_name");n.push("支行名称")}else{b.push("dgyh_subbank_name");n.push("一般户支行名称")}}for(var l in b){if(b[l]=="dgyh_bank_city"){var t="";$(".esign_split_city").find("option:selected").each(function(){if($(this).parent("span").length==0){t=$(this).val()}});z.push({name:"dgyh_bank_city",value:t});continue}if($("#"+b[l]).val()==""){if(H){mAlert("请填写 必填信息:"+n[l]);return false}}else{if(b[l]=="dgyh_account"){if(!new RegExp("^[0-9]*$").test($("#"+b[l]).val())){mAlert("银行账号信息有误");return false}if($("#dgyh_bank_name").val()=="中国农业银行"){if(!new RegExp("^[0-9]{17}$").test($("#"+b[l]).val())){mAlert("您的银行卡号不完整，请您到开户银行咨询完整的银行卡号");return false}}}if(b[l]=="company_codeusc"){z.push({name:b[l],value:$("#"+b[l]).val().toUpperCase()})}else{z.push({name:b[l],value:$("#"+b[l]).val()})}}}z.push({name:"dgyh_head_bank",value:$("#dgyh_bank_name").val()});if(f==0){var q=["swdj_number","swdj_expireday_start","swdj_expireday_end","zzjg_number","zzjg_expireday_start","zzjg_expireday_end"];var F=["税务登记证的登字号","税务登记证的起始有效期","税务登记证的有效期截止时间","组织机构代码编号","组织机构代码的起始有效期","资质机构代码有效期的截止时间"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}}if(h!=4){var q=["jyxk_number","jyxk_expireday_start","zrbx_expireday_start","zrbx_expireday_end"];var F=["旅行社业务经营许可证的编号","旅行社业务经营许可证的签发日期","保险单的保险期","保险单的保险期"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}var v=[];$("input[name='badj_jyxk']:checked").each(function(J,K){v.push($(K).val())});if(v.length==0){if(H){mAlert("请选择 必填信息:旅行社业务经营许可证的许可经营范围");return false}}else{z.push({name:"badj_jyxk",value:v})}}else{var m=["ysxk_expireday_start","ysxk_expireday_end","hkyy_expireday_start","hkyy_expireday_end","slxk_expireday_start","slxk_expireday_end","gjbl_expireday_start","gjbl_expireday_end","cyxk_expireday_start","cyxk_expireday_end","dlys_expireday_start","dlys_expireday_end","clba_expireday_start","clba_expireday_end","gwxm_expireday_start","gwxm_expireday_end"];for(var l in m){if($("#"+m[l]).val()==""){continue}else{z.push({name:m[l],value:$("#"+m[l]).val()})}}var x=["ysxk_type","hkyy_type"];for(var l in x){if($("input[name='"+x[l]+"']:checked").length!=0){var G=[];$("input[name='"+x[l]+"']:checked").each(function(J,K){G.push($(K).val())});z.push({name:x[l],value:G})}}}if(h==2||h==3){var q=["fsba_number","fsba_expireday_start"];var F=["旅行社分社备案登记证明的编号","旅行社分社备案登记证明的签发日期"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}var s=[];$("input[name='fsba_jyxk']:checked").each(function(J,K){s.push($(K).val())});if(s.length==0){if(H){mAlert("请选择 必填信息:旅行社分社备案登记证明上的许可经营范围");return false}}else{z.push({name:"fsba_jyxk",value:s})}}}else{if(a==3){var q=["company_identity_number"];var F=["公司统一编号"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}if(h!=4){var q=["yyzz_number","yyzz_expireday_start","lvbx_expireday_start","lvbx_expireday_end"];var F=["旅行业执照","旅行业执照的核准注册登记日期","保险单的保险期起始日期","保险单的保险期结束日期"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}}}else{}}var C=$("#yyzh_expireday_start").val()+","+$("#yyzh_expireday_end").val();if($("#yyzh_expireday_start").val()&&$("#yyzh_expireday_end").val()){z.push({name:"yyzh_expireday",value:C})}if($("#need_proxy_qualify").val()==1){if(H&&!$("#dl_name").val()){mAlert("请填写 必填信息:委托公司全称");return false}if(H&&!$('.dl_register_land input[type="radio"]:checked').length){mAlert("请选择 委托公司注册地");return false}var r=$('.dl_register_land input[type="radio"]:checked').val();var B="";var i=false;if(r!=""){switch(r){case"0":var p="";$("#city_list").find("option:selected").each(function(){if($(this).parent("span").length==0){p=$(this).val()}});if(p==""){i=true}B=$("select[name='dl_province_name']").find("option:selected").val()+"--"+p;break;case"1":var c=$("select[name='dl_country_name']").find("option:selected").val();if(c==""){i=true}B=c;break;case"2":var A=$("select[name='dl_special_region']").find("option:selected").val();if(!/^(香港|澳门)$/.test(A)){i=true}B=A;break;case"3":B=$("select[name='dl_special_province']").find("option:selected").val();break;default:break}if(H&&(i||B=="")){mAlert("请选择 必填信息：公司注册国家/省市");return false}else{z.push({name:"dl_city",value:B})}}var u=0;if($(".J-dl-travel-agency input").attr("checked")=="checked"){if(r==1||r==2){u=1}else{u=$(".J-dl-feature-select select").val()}}else{if($(".J-dl-not-travel-agency input").attr("checked")=="checked"){u=$('input[name="dl_company_feature"]:checked').val()}else{if(H){mAlert("请选择 委托公司性质");return false}}}z.push({name:"dl_company_feature_id",value:u});if(d==0){var e=$("input[name='dl_is_three_in_one']:checked").val();z.push({name:"dl_is_three_in_one",value:e});var b=["dl_company_codeusc","dl_yyzh_expireday_start","dl_yyzh_expireday_end"];var n=["委托公司的营业执照的统一社会信用代码／注册号","委托公司营业执照有效期","委托公司营业执照有效期"];for(var j in b){if($("#"+b[j]).val()==""){if(H){mAlert("请填写 必填信息:"+n[j]);return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()})}}if(e==0){var q=["dl_swdj_number","dl_swdj_expireday_start","dl_swdj_expireday_end","dl_zzjg_number","dl_zzjg_expireday_start","dl_zzjg_expireday_end"];var F=["委托公司的税务登记证的登字号","委托公司的税务登记证的起始有效期","委托公司的税务登记证的有效期截止时间","委托公司的组织机构代码编号","委托公司的组织机构代码的起始有效期","委托公司的资质机构代码有效期的截止时间"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}}if(u!=4){var b=["dl_jyxk_number","dl_jyxk_expireday_start","dl_zrbx_expireday_start","dl_zrbx_expireday_end"];var n=["委托公司的《旅行社业务经营许可证》的编号","委托公司的《旅行社业务经营许可证》的签发日期","保险单的保险期","保险单的保险期"];for(var j in b){if($("#"+b[j]).val()==""){if(H){mAlert("请填写 必填信息:"+n[j]);return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()})}}var E=[];$("input[name='dl_badj_jyxk']:checked").each(function(J,K){E.push($(K).val())});if(E.length==0){if(H){mAlert("请选择 必填信息:委托公司的《旅行社业务经营许可证》的许可经营范围");return false}}else{z.push({name:"dl_badj_jyxk",value:E})}if(u==2||u==3){var b=["dl_fsba_number","dl_fsba_expireday_start"];var y=["委托公司的《旅行社业务经营许可证》的编号","委托公司的《旅行社分社备案登记证明》的签发日期"];var w=["委托公司的《服务网点备案登记证》的编号","委托公司的《服务网点备案登记证》的签发日期"];for(var j in b){if($("#"+b[j]).val()==""){if(H){mAlert("请填写 必填信息:"+u==2?y[j]:w[j]);return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()})}}var g=[];$("input[name='dl_fsba_jyxk']:checked").each(function(J,K){g.push($(K).val())});if(g.length==0){if(H){if(u==2){mAlert("请选择 必填信息:委托公司的《旅行社分社备案登记证明》的许可经营范围")}else{mAlert("请选择 必填信息:委托公司的《服务网点备案登记证》的许可经营范围")}return false}}else{z.push({name:"dl_fsba_jyxk",value:g})}}}}else{if(d==3){var q=["dl_company_identity_number"];var F=["委托公司公司统一编号"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}$("#dl_company_identity_number").val();if(u!=4){var q=["dl_yyzz_number","dl_yyzz_expireday_start","dl_lvbx_expireday_start","dl_lvbx_expireday_end"];var F=["旅行业执照","旅行业执照的核准注册登记日期","保险单的保险期起始日期","保险单的保险期结束日期"];for(var l in q){if($("#"+q[l]).val()==""){if(H){mAlert("请填写 必填信息:"+F[l]);return false}}else{z.push({name:q[l],value:$("#"+q[l]).val()})}}}}}var b=["dl_company_birthday","dl_yyzh_desc","dl_wt_expireday_start","dl_wt_expireday_end","dlzz_expireday_start","dlzz_expireday_end","dl_frsf_name","dl_frsf_number","dl_frsf_expireday_start","dl_frsf_expireday_end"];var n=["委托公司成立日期","委托公司的经营范围","代理委托协议的有效期","代理委托协议的有效期","委托公司的公司登记注册文件的有效期","委托公司的公司登记注册文件的有效期","委托公司的法人姓名","委托公司的法人身份证件号码","委托公司的法人身份证件有效期","委托公司的法人身份证件有效期"];for(var j in b){if(b[j]=="dlzz_expireday_start"||b[j]=="dlzz_expireday_end"){if(r==3){continue}}if($("#"+b[j]).val()==""){if(H){mAlert("请填写 必填信息:"+n[j]);return false}}else{z.push({name:b[j],value:$("#"+b[j]).val()})}}z.push({name:"dl_fr_cret_type",value:$("input[name='dl_fr_cret_type']:checked").val()});if(d!=0){z.push({name:"dlyz",value:$('.dlyz input[type="radio"]:checked').val()});z.push({name:"dl_swyz",value:$('.dl_swyz input[type="radio"]:checked').val()});z.push({name:"dl_hyyz",value:$('.dl_hyyz input[type="radio"]:checked').val()});z.push({name:"dl_bxyz",value:$('.dl_bxyz input[type="radio"]:checked').val()});if($("#dl_company_url").val()==""){if(H){mAlert("请填写 必填信息:委托公司所在注册地区的企业信息公示平台链接");return false}}else{z.push({name:"dl_company_url",value:$("#dl_company_url").val()})}b=["dl_swjs_expireday_start","dl_swjs_expireday_end","dl_lybx_expireday_start","dl_lybx_expireday_end"];for(var j in b){z.push({name:b[j],value:$("#"+b[j]).val()})}}z.push({name:"need_proxy_qualify",value:$("#need_proxy_qualify").val()});z.push({name:"dl_name",value:$("#dl_name").val()});z.push({name:"dl_translate_name",value:$("#dl_translate_name").val()});z.push({name:"dl_register_land",value:d})}if(a==1||a==2){z.push({name:"djyz",value:$('.djyz input[type="radio"]:checked').val()});z.push({name:"swyz",value:$('.swyz input[type="radio"]:checked').val()});z.push({name:"hyyz",value:$('.hyyz input[type="radio"]:checked').val()});z.push({name:"bxyz",value:$('.bxyz input[type="radio"]:checked').val()});b=["swjs_expireday_start","swjs_expireday_end","lybx_expireday_start","lybx_expireday_end"];for(var j in b){z.push({name:b[j],value:$("#"+b[j]).val()})}}if(a==0){z.push({name:"is_three_in_one",value:$('.is_three_in_one input[type="radio"]:checked').val()})}var I=true;$(".upload .item").each(function(){if($(this).hasClass("hide")){return true}var O=$(this).attr("data-type");var N=$(this).attr("data-alias");var S=$(this).find(".label").text();S=S.replace("*","");S=S.replace(":","");var K=$(this).attr("data-required");if($('.is_three_in_one input[type="radio"]:checked').val()==1){if(O=="swdj"||O=="zzjg"){K="false"}}if($('.dl_is_three_in_one input[type="radio"]:checked').val()==1){if(O=="dl_swdj"||O=="dl_zzjg"){K="false"}}if($.inArray(u,[1,2,3])==-1){if(O=="dl_jyxk"||O=="dlzr"||O=="dlxk"){K="false"}}if($.inArray(u,[2,3])==-1){if(O=="dl_badj"){K="false"}}if($.inArray(u,[5,7])==-1){if(O=="dlxk_1"){K="false"}}if($("input[name='have_corporate_account']:checked").length!=0){if(O=="khxk"){K="false"}}if(O=="clba"){var R=false;z.forEach(function(T){if(T.name=="dlys"&&T.value!=""){R=true}});if(!R){K="true";S=S+"或《道路运输经营许可证》"}}var M=$(this);if($(this).attr("data-multi")=="true"){var Q=M.attr("data-total")-0;var L=0;var J=[];while(L<=Q){var P=O+"_"+L;if(M.find("#"+P).val()){J.push(M.find("#"+P).val())}L++}if(J.length){if(N){O=N}z.push({name:O,value:JSON.stringify(J)})}else{if(K=="true"){if(H){mAlert("请上传:"+S);I=false;return false}}}}else{if(K=="true"){if(M.find("#"+O).val()==""){if(H){mAlert("请上传:"+S);I=false;return false}}}if(M.find("#"+O).val()){if(N){O=N}z.push({name:O,value:M.find("#"+O).val()})}}});if(!I){return false}z.push({name:"qtsm",value:$("#qtsm").val()});return z}function checkField2(){var a=validatePage2(true);if(false===a){return false}a.push({name:"status",value:"1"});a.push({name:"act",value:"step2record"});$.post("/sales/ajax_alliance.php",a,function(b){if(b.errno==0){location.href="/sales/alliance.php?step=3"}else{mAlert(b.error)}})}function saveRecord(){var a=validatePage2(false);if(!a.length){return false}a.push({name:"status",value:"0"});a.push({name:"act",value:"step2record"});$.post("/sales/ajax_alliance.php",a,function(b){if(b.errno==0){mAlert(b.error)}else{mAlert(b.error)}})}function newUpload(b,a,c){var d=new plupload.Uploader({browse_button:"pickfiles-"+b,url:a,unique_names:true,filters:{max_file_size:"5mb",mime_types:[{title:"Image files",extensions:c},{title:"Zip files",extensions:"zip"}]},file_data_name:"Filedata",multipart_params:{cat:"union"}});d.init();d.bind("FilesAdded",function(f,e){$("#uploadfiles-"+b).click()});d.bind("UploadProgress",function(f,e){var g="http://css.mafengwo.net/images/weng/loading2.gif";$("#preview-"+b).html("<img src='"+g+"' width='100px' height='20px'/>")});d.bind("FileUploaded",function(h,f,e){if(/,/.test(e.response)){var g=e.response.split(",")}else{if(/\|/.test(e.response)){var g=e.response.split("|")}}$("#preview-"+b).html("<a target='_blank' href='/sales/alliance.php?step=preView&image="+g[0]+"'>查看上传</a>");$("#"+b).val(g[0])});d.bind("Error",function(f,e){mAlert(e.message)});$("#uploadfiles-"+b).click(function(){d.start()})}function get_connect_share_js(e,h,f,d,c){var g="";if(e=="sina"){if("object"===typeof f){f=f.sina}if(f!=""){h=f.substr(0,140)}var b="http://service.weibo.com/share/share.php?appkey=82015185&title="+encodeURIComponent(h)+"&pic="+encodeURIComponent(c)+"&url="+encodeURIComponent(d)+"&ralateUid=1730714982";g="window.open('"+b+"','_blank','scrollbars=no,width=600,height=480,left=75,top=20,status=no,resizable=yes');"}else{if(e=="renren"||e=="xiaonei"){if("object"===typeof h){h=h.renren}if("object"===typeof f){f=f.renren}var a={resourceUrl:d,pic:c,title:h,description:f};shareClick(a)}else{if(e=="qzone"||e=="qq"){if("object"===typeof h){h=h.qq}if("object"===typeof f){f=f.qq}g="window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(h)+"&summary="+encodeURIComponent(f)+"&pics="+encodeURIComponent(c)+"&site="+encodeURIComponent("马蜂窝")+"&url="+encodeURIComponent(d)+"','_blank','scrollbars=no,width=600,height=450,left=75,top=20,status=no,resizable=yes');"}else{return false}}}return g}function shareClick(a){rrShareOnclick(a)}var o=$({});$.subscribe=function(){o.bind.apply(o,arguments)};$.unsubscribe=function(){o.unbind.apply(o,arguments)};$.publish=function(){o.trigger.apply(o,arguments)};var cookieHandler={key:"_YWF_BROWSE_HIST_",get:function(){var cookieStr=$.cookie(cookieHandler.key),cookieArr;if(cookieStr){cookieArr=eval("("+cookieStr+")");return cookieArr}return false},set:function(h,g){var f=cookieHandler.get()||[],e=-1,a="";for(var c=0;c<f.length;c++){var d=f[c];if(h==d.id){e=c;break}}if(f.length>0){if(e>=0){Array.prototype.splice.call(f,e,1)}else{if(f.length==3){Array.prototype.shift.call(f)}}}Array.prototype.push.call(f,{id:h,title:g});for(var b=0;b<f.length;b++){var d=f[b];f[b]='{"id":"'+d.id+'","title":"'+d.title+'"}'}a="["+f.join(",")+"]";$.cookie(cookieHandler.key,a)},assemble:function(){var c=cookieHandler.get(),b="";for(var a=0;a<c.length;a++){var d=c[a]["title"].length>12?c[a]["title"].substr(0,12)+"...":c[a]["title"];b+='<li><a title="'+c[a]["title"]+'" target="_blank" href="/sales/'+c[a]["id"]+'.html">'+d+"</a></li>"}return b},clear:function(){$.cookie(cookieHandler.key,null)}};function share_weibo(e,d,c,b){var a="http://service.weibo.com/share/share.php?title="+encodeURIComponent(e)+"&pic="+encodeURIComponent(c)+"&url="+encodeURIComponent(b)+"&ralateUid=3120321513&rnd=1393998152805";window.open(a,"_blank","scrollbars=no,width=600,height=480,left=75,top=20,status=no,resizable=yes")}var Timer=function(b,a){this.dom=b;this.target=a};Timer.fn=Timer.prototype;Timer.fn.zero=function(a){var a=parseInt(a,10);if(a>0){if(a<=9){a="0"+a}return String(a)}else{return"00"}};Timer.fn.start=function(c){var b=(new Date()).getTime();var a=this;$.getJSON("/sales/ajax.php",{act:"GetTime"},function(e){if(e.ret==1){var g=(new Date()).getTime();var d=parseInt(e.msg)+Math.floor(g-b);var f=g-d;a.target=a.target+f;setInterval(function(){var h=a.caculate.call(a);$.publish("change-time",h)},1000)}})};Timer.fn.caculate=function(){var b=new Date(),d=Math.round((this.target-b.getTime())/1000);var e={sec:"00",mini:"00",hour:"00",day:"00"};if(d>0){e.sec=this.zero(d%60);e.mini=Math.floor((d/60))>0?this.zero(Math.floor((d/60))%60):"00";var a=this.dom.day=="plus"?Math.floor((d/3600)):Math.floor((d/3600))%24;e.hour=Math.floor((d/3600))>0?this.zero(a):"00";e.day=Math.floor((d/86400))>0?this.zero(Math.floor((d/86400))%30):"00"}for(var c in e){var f=$(this.dom[c]);f.text(e[c])}return e};var YWFCollect=function(){};YWFCollect.fn=YWFCollect.prototype;YWFCollect.fn.collect=function(c,a){if(window.__mfw_uid===0){show_login();return}var b={act:"AddCollect",sales_id:c};$.post("/sales/ajax.php",b,function(d){if(a){a()}},"json")};var cc=new YWFCollect();$(function(){$(".extra-side>li>.es-icon").hover(function(){$(this).siblings(".es-txt").fadeIn()},function(){var a=$(this);window.shareTimer=setTimeout(function(){a.siblings(".es-txt").fadeOut()},300)}).closest(".extra-side").find(".es-backTop>.es-icon").bind("click",function(){$(window).scrollTop(0)});$("body").delegate(".extra-side>li>.es-txt","mouseenter",function(){clearTimeout(window.shareTimer)});$("body").delegate(".extra-side>li>.es-txt","mouseleave",function(){$(this).fadeOut()});$(".FeedBackBtn").hide();$("#btn_helper").bind("click",function(){if(parseInt($(this).data("state"))>0){$("#helper_info_tips, #popup_layer").fadeIn()}else{$("#helper_info, #popup_layer").fadeIn()}});$(".close-btn").bind("click",function(){$("#helper_info,#helper_info_tips, #popup_layer").fadeOut();$("#helper_form input:text").each(function(){$(this).placeholder({holderContent:$(this).data("ph"),holderColor:"#999999"})});$("#ipt_phone").data("valid",0);$("#tip_sending, #ipt_valid, #tip_success,#btn_prebook_success").hide();$("#btn_valid_phone,#btn_prebook").show()});$("body").delegate("#submit_helper","click",function(){if(window.__mfw_uid===0){show_login();return}var c=$(this),e=$("#ipt_name"),d=$("#ipt_email_1"),a=$("#ipt_phone");var b=new RegExp("^([A-Z0-9a-z_-])+@([a-z0-9A-Z_-])+((\\.([a-zA-Z])+){1,2})$");var f={};if(c.data("lock")){return}if($.trim(e.val()).length==0||e.val()==e.data("ph")){mTinyAlert("请输入正确的姓名！");return}if($.trim(d.val()).length==0||d.val()==d.data("ph")||!b.test($.trim(d.val()))){mTinyAlert("请输入正确的邮箱！");return}if($.trim(a.val()).length==0||a.val()==a.data("ph")){mTinyAlert("请输入正确的手机号！");return}if(a.data("valid")!=2){mTinyAlert("请验证您的手机号！");return}f.act="AddSalesUser";f.order_name=$.trim(e.val());f.order_phone=$.trim(a.val());f.order_email=$.trim(d.val());c.data("lock",true);$.post("/sales/ajax.php",f,function(g){if(g.ret==1){c.hide();$("#btn_prebook_success").show();setTimeout(function(){$(".close-btn").trigger("click");$("#btn_helper").data("state",1);$("#helper_info").remove()},1000)}mTinyAlert(g.msg)},"json")});$("body").delegate("#btn_valid_phone","click",function(){if(window.__mfw_uid===0){show_login();return}var b=$(this),a=$("#ipt_phone"),e=a.data("valid"),d=$("#ipt_valid"),c=$("#tip_sending"),g=$("#tip_success"),f={};if($.trim(a.val()).length!=11||isNaN($.trim(a.val()))){mTinyAlert("请输入正确的手机号");return}if(!e){f.act="SendMobileCode";f.order_phone=$.trim(a.val());$.post("/sales/ajax.php",f,function(h){if(h.ret==1){a.data("valid",1);d.show();c.show()}else{mTinyAlert(h.msg)}},"json")}else{if(e==1){if(!$.trim(d.val()).length){mTinyAlert("请输入验证码");return}f.act="VerifyMobileCode";f.order_phone=$.trim(a.val());f.order_code=$.trim(d.val());$.post("/sales/ajax.php",f,function(h){if(h.ret==1){d.hide();c.hide();b.hide();a.data("valid",2);g.show()}else{mTinyAlert(h.msg)}},"json")}else{return}}});$("body").delegate("#ipt_phone","change",function(){var a=$(this),b=a.data("orignal");$("#tip_sending,#tip_success").hide();if(a.val()==b){a.data("valid",2);$("#btn_valid_phone").hide()}else{a.data("valid",0);$("#btn_valid_phone").show()}});$("#helper_form input:text").each(function(){$(this).placeholder({holderContent:$(this).data("ph"),holderColor:"#999999"})});$("body").delegate("[data-ywfstat]","click",function(){var b=$(this).data("ywfstat"),a=$(this).data("total");if(!b){return}$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V7_"+b));if(a){$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V7_"+a+"总数"))}});$("#btn_share_wx").bind("click",function(){$("#popup_container2").show()});$(".close-btn").bind("click",function(){$(".popup-box").hide()})});(function(b){if(b.hasSalesTrackLog){return false}if(!Date.now){Date.now=function(){return new Date().getTime()}}var f=Date.now(),g=Date.now(),j=0,d=0,c=false;var h="hidden",k=0;if(h in document){document.addEventListener("visibilitychange",a)}else{if((h="mozHidden") in document){document.addEventListener("mozvisibilitychange",a)}else{if((h="webkitHidden") in document){document.addEventListener("webkitvisibilitychange",a)}else{if((h="msHidden") in document){document.addEventListener("msvisibilitychange",a)}else{if("onfocusin" in document){document.onfocusin=document.onfocusout=a}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a}}}}}function a(n){var p="active",q="hide",m={focus:p,focusin:p,pageshow:p,blur:q,focusout:q,pagehide:q},l;n=n||window.event;if(n.type in m){l=m[n.type]}else{l=this[h]?"hide":"active"}e(l)}if(document[h]!==undefined){a({type:document[h]?"blur":"focus"})}$(window).on("beforeunload",function(){e("close")}).on("scroll",function(){clearTimeout(k);k=setTimeout(function(){e("scroll")},500)});$("html").on("click",function(){e("click")});function e(l){}function i(l){return Math.floor((Date.now()-l)/1000)}e("open");b.hasSalesTrackLog=true})(window);